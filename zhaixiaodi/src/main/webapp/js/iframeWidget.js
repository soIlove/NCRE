(function(){var b=(function(){var e={};var f=[];e.inc=function(h,g){return true};e.register=function(j,g){var n=j.split(".");var m=e;var h=null;while(h=n.shift()){if(n.length){if(m[h]===undefined){m[h]={}}m=m[h]}else{if(m[h]===undefined){try{m[h]=g(e)}catch(o){}}}}};e.regShort=function(g,h){if(e[g]!==undefined){throw"["+g+"] : short : has been register"}e[g]=h};e.IE=/msie/i.test(navigator.userAgent);e.E=function(g){if(typeof g==="string"){return document.getElementById(g)}else{return g}};e.C=function(g){var h;g=g.toUpperCase();if(g=="TEXT"){h=document.createTextNode("")}else{if(g=="BUFFER"){h=document.createDocumentFragment()}else{h=document.createElement(g)}}return h};e.log=function(g){f.push("["+((new Date()).getTime()%100000)+"]: "+g)};e.getErrorLogInformationList=function(g){return f.splice(0,g||f.length)};return e})();$Import=b.inc;b.register("core.obj.parseParam",function(e){return function(h,g,f){var j,m={};g=g||{};for(j in h){m[j]=h[j];if(g[j]!=null){if(f){if(h.hasOwnProperty[j]){m[j]=g[j]}}else{m[j]=g[j]}}}return m}});b.register("core.dom.isNode",function(e){return function(f){return(f!=undefined)&&Boolean(f.nodeName)&&Boolean(f.nodeType)}});b.register("common.iframe",function(e){return function(f){var g={};var j;var h=function(n){var m=e.core.obj.parseParam({id:"",url:"",name:"iframe_widget",root:null,width:"100%",height:"100%"},n);j=document.createElement("iframe");if(m.id){j.id=m.id}j.src=m.url;j.width=m.width;j.height=m.height;j.frameBorder=0;j.scrolling="no";j.marginHeight="0";j.marginwidth="0";j.allowTransparency="true";if(e.core.dom.isNode(m.root)){m.root.innerHTML="";m.root.appendChild(j)}else{throw"conf.root is not an avaliable dom element."}};g.insertIFrame=h;return g}});b.register("core.str.trim",function(e){return function(j){if(typeof j!=="string"){throw"trim need a string as parameter"}var f=j.length;var h=0;var g=/(\u3000|\s|\t|\u00A0)/;while(h<f){if(!g.test(j.charAt(h))){break}h+=1}while(f>h){if(!g.test(j.charAt(f-1))){break}f-=1}return j.slice(h,f)}});b.register("core.json.jsonToQuery",function(e){var f=function(h,g){h=h==null?"":h;h=e.core.str.trim(h.toString());if(g){return encodeURIComponent(h)}else{return h}};return function(n,j){var o=[];if(typeof n=="object"){for(var h in n){if(h==="$nullName"){o=o.concat(n[h]);continue}if(n[h] instanceof Array){for(var m=0,g=n[h].length;m<g;m++){o.push(h+"="+f(n[h][m],j))}}else{if(typeof n[h]!="function"){o.push(h+"="+f(n[h],j))}}}}if(o.length){return o.join("&")}else{return""}}});b.register("kit.extra.isNull",function(e){return function(f){f=f+"";return(f==null||f==""||f=="undefined")?true:false}});b.register("core.str.parseURL",function(e){return function(h){var g=/^(?:([A-Za-z]+):(\/{0,3}))?([0-9.\-A-Za-z]+\.[0-9A-Za-z]+)?(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;var o=["url","scheme","slash","host","port","path","query","hash"];var m=g.exec(h);var n={};for(var j=0,f=o.length;j<f;j+=1){n[o[j]]=m[j]||""}return n}});b.register("core.arr.isArray",function(e){return function(f){return Object.prototype.toString.call(f)==="[object Array]"}});b.register("core.json.queryToJson",function(e){return function(h,o){var q=e.core.str.trim(h).split("&");var p={};var g=function(s){if(o){return decodeURIComponent(s)}else{return s}};for(var m=0,n=q.length;m<n;m++){if(q[m]){var j=q[m].split("=");var f=j[0];var r=j[1];if(j.length<2){r=f;f="$nullName"}if(!p[f]){p[f]=g(r)}else{if(e.core.arr.isArray(p[f])!=true){p[f]=[p[f]]}p[f].push(g(r))}}}return p}});b.register("core.util.URL",function(e){return function(m,g){var j=e.core.obj.parseParam({isEncodeQuery:false,isEncodeHash:false},g||{});var h={};var o=e.core.str.parseURL(m);var f=e.core.json.queryToJson(o.query);var n=e.core.json.queryToJson(o.hash);h.setParam=function(p,q){f[p]=q;return this};h.getParam=function(p){return f[p]};h.setParams=function(q){for(var p in q){h.setParam(p,q[p])}return this};h.setHash=function(p,q){n[p]=q;return this};h.getHash=function(p){return n[p]};h.valueOf=h.toString=function(){var p=[];var q=e.core.json.jsonToQuery(f,j.isEncodeQuery);var r=e.core.json.jsonToQuery(n,j.isEncodeQuery);if(o.scheme!=""){p.push(o.scheme+":");p.push(o.slash)}if(o.host!=""){p.push(o.host);if(o.port!=""){p.push(":");p.push(o.port)}}p.push("/");p.push(o.path);if(q!=""){p.push("?"+q)}if(r!=""){p.push("#"+r)}return p.join("")};return h}});b.register("kit.extra.jsonToUrl",function(f){var e=function(g){if(typeof g!="string"){return g}if(g.toLowerCase()=="y"){return"1"}else{if(g.toLowerCase()=="n"){return"0"}else{return g}}};return function(o,m,n){var h=n||e;var j=f.core.util.URL(m);for(var g in o){if(!f.kit.extra.isNull(o[g])){if(h&&typeof h=="function"){j.setParam(g,h(o[g]))}else{j.setParam(g,o[g])}}}return j}});b.register("core.dom.removeNode",function(e){return function(f){f=e.E(f)||f;try{f.parentNode.removeChild(f)}catch(g){}}});b.register("core.util.getUniqueKey",function(g){var e=(new Date()).getTime().toString(),f=1;return function(){return e+(f++)}});b.register("core.func.empty",function(){return function(){}});b.register("core.io.scriptLoader",function(f){var g={};var e={url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:f.core.func.empty,onTimeout:null,isEncode:false,uniqueID:null};return function(o){var m,h;var j=f.core.obj.parseParam(e,o);if(j.url==""){throw"scriptLoader: url is null"}var n=j.uniqueID||f.core.util.getUniqueKey();m=g[n];if(m!=null&&f.IE!=true){f.core.dom.removeNode(m);m=null}if(m==null){m=g[n]=f.C("script")}m.charset=j.charset;m.id="scriptRequest_script_"+n;m.type="text/javascript";if(j.onComplete!=null){if(f.IE){m.onreadystatechange=function(){if(m.readyState.toLowerCase()=="loaded"||m.readyState.toLowerCase()=="complete"){try{clearTimeout(h);document.getElementsByTagName("head")[0].removeChild(m);m.onreadystatechange=null}catch(p){}j.onComplete()}}}else{m.onload=function(){try{clearTimeout(h);f.core.dom.removeNode(m)}catch(p){}j.onComplete()}}}m.src=b.core.util.URL(j.url,{isEncodeQuery:j.isEncode}).setParams(j.args);document.getElementsByTagName("head")[0].appendChild(m);if(j.timeout>0&&j.onTimeout!=null){h=setTimeout(function(){try{document.getElementsByTagName("head")[0].removeChild(m)}catch(p){}j.onTimeout()},j.timeout)}return m}});b.register("core.io.jsonp",function(e){return function(m){var h=e.core.obj.parseParam({url:"",charset:"UTF-8",timeout:30*1000,args:{},onComplete:null,onTimeout:null,responseName:null,isEncode:false,varkey:"callback"},m);var n=-1;var j=h.responseName||("STK_"+e.core.util.getUniqueKey());h.args[h.varkey]=j;var f=h.onComplete;var g=h.onTimeout;window[j]=function(o){if(n!=2&&f!=null){n=1;f(o)}};h.onComplete=null;h.onTimeout=function(){if(n!=1&&g!=null){n=2;g()}};return e.core.io.scriptLoader(h)}});b.register("core.dom.sizzle",function(r){var x=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,q=0,j=Object.prototype.toString,w=false,p=true;[0,0].sort(function(){p=false;return 0});var g=function(D,e,G,H){G=G||[];e=e||document;var J=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!D||typeof D!=="string"){return G}var E=[],A,L,O,z,C=true,B=g.isXML(e),I=D,K,N,M,F;do{x.exec("");A=x.exec(I);if(A){I=A[3];E.push(A[1]);if(A[2]){z=A[3];break}}}while(A);if(E.length>1&&s.exec(D)){if(E.length===2&&m.relative[E[0]]){L=o(E[0]+E[1],e)}else{L=m.relative[E[0]]?[e]:g(E.shift(),e);while(E.length){D=E.shift();if(m.relative[D]){D+=E.shift()}L=o(D,L)}}}else{if(!H&&E.length>1&&e.nodeType===9&&!B&&m.match.ID.test(E[0])&&!m.match.ID.test(E[E.length-1])){K=g.find(E.shift(),e,B);e=K.expr?g.filter(K.expr,K.set)[0]:K.set[0]}if(e){K=H?{expr:E.pop(),set:f(H)}:g.find(E.pop(),E.length===1&&(E[0]==="~"||E[0]==="+")&&e.parentNode?e.parentNode:e,B);L=K.expr?g.filter(K.expr,K.set):K.set;if(E.length>0){O=f(L)}else{C=false}while(E.length){N=E.pop();M=N;if(!m.relative[N]){N=""}else{M=E.pop()}if(M==null){M=e}m.relative[N](O,M,B)}}else{O=E=[]}}if(!O){O=L}if(!O){g.error(N||D)}if(j.call(O)==="[object Array]"){if(!C){G.push.apply(G,O)}else{if(e&&e.nodeType===1){for(F=0;O[F]!=null;F++){if(O[F]&&(O[F]===true||O[F].nodeType===1&&g.contains(e,O[F]))){G.push(L[F])}}}else{for(F=0;O[F]!=null;F++){if(O[F]&&O[F].nodeType===1){G.push(L[F])}}}}}else{f(O,G)}if(z){g(z,J,G,H);g.uniqueSort(G)}return G};g.uniqueSort=function(z){if(h){w=p;z.sort(h);if(w){for(var e=1;e<z.length;e++){if(z[e]===z[e-1]){z.splice(e--,1)}}}}return z};g.matches=function(e,z){return g(e,null,null,z)};g.find=function(F,e,G){var E;if(!F){return[]}for(var B=0,A=m.order.length;B<A;B++){var D=m.order[B],C;if((C=m.leftMatch[D].exec(F))){var z=C[1];C.splice(1,1);if(z.substr(z.length-1)!=="\\"){C[1]=(C[1]||"").replace(/\\/g,"");E=m.find[D](C,e,G);if(E!=null){F=F.replace(m.match[D],"");break}}}}if(!E){E=e.getElementsByTagName("*")}return{set:E,expr:F}};g.filter=function(J,I,M,C){var A=J,O=[],G=I,E,e,F=I&&I[0]&&g.isXML(I[0]);while(J&&I.length){for(var H in m.filter){if((E=m.leftMatch[H].exec(J))!=null&&E[2]){var z=m.filter[H],N,L,B=E[1];e=false;E.splice(1,1);if(B.substr(B.length-1)==="\\"){continue}if(G===O){O=[]}if(m.preFilter[H]){E=m.preFilter[H](E,G,M,O,C,F);if(!E){e=N=true}else{if(E===true){continue}}}if(E){for(var D=0;(L=G[D])!=null;D++){if(L){N=z(L,E,D,G);var K=C^!!N;if(M&&N!=null){if(K){e=true}else{G[D]=false}}else{if(K){O.push(L);e=true}}}}}if(N!==undefined){if(!M){G=O}J=J.replace(m.match[H],"");if(!e){return[]}break}}}if(J===A){if(e==null){g.error(J)}else{break}}A=J}return G};g.error=function(e){throw"Syntax error, unrecognized expression: "+e};var m={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(E,z){var B=typeof z==="string",D=B&&!/\W/.test(z),F=B&&!D;if(D){z=z.toLowerCase()}for(var A=0,e=E.length,C;A<e;A++){if((C=E[A])){while((C=C.previousSibling)&&C.nodeType!==1){}E[A]=F||C&&C.nodeName.toLowerCase()===z?C||false:C===z}}if(F){g.filter(z,E,true)}},">":function(E,z){var C=typeof z==="string",D,A=0,e=E.length;if(C&&!/\W/.test(z)){z=z.toLowerCase();for(;A<e;A++){D=E[A];if(D){var B=D.parentNode;E[A]=B.nodeName.toLowerCase()===z?B:false}}}else{for(;A<e;A++){D=E[A];if(D){E[A]=C?D.parentNode:D.parentNode===z}}if(C){g.filter(z,E,true)}}},"":function(B,z,D){var A=q++,e=y,C;if(typeof z==="string"&&!/\W/.test(z)){z=z.toLowerCase();C=z;e=v}e("parentNode",z,A,B,C,D)},"~":function(B,z,D){var A=q++,e=y,C;if(typeof z==="string"&&!/\W/.test(z)){z=z.toLowerCase();C=z;e=v}e("previousSibling",z,A,B,C,D)}},find:{ID:function(z,A,B){if(typeof A.getElementById!=="undefined"&&!B){var e=A.getElementById(z[1]);return e?[e]:[]}},NAME:function(A,D){if(typeof D.getElementsByName!=="undefined"){var z=[],C=D.getElementsByName(A[1]);for(var B=0,e=C.length;B<e;B++){if(C[B].getAttribute("name")===A[1]){z.push(C[B])}}return z.length===0?null:z}},TAG:function(e,z){return z.getElementsByTagName(e[1])}},preFilter:{CLASS:function(B,z,A,e,E,F){B=" "+B[1].replace(/\\/g,"")+" ";if(F){return B}for(var C=0,D;(D=z[C])!=null;C++){if(D){if(E^(D.className&&(" "+D.className+" ").replace(/[\t\n]/g," ").indexOf(B)>=0)){if(!A){e.push(D)}}else{if(A){z[C]=false}}}}return false},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(z,e){return z[1].toLowerCase()},CHILD:function(e){if(e[1]==="nth"){var z=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(z[1]+(z[2]||1))-0;e[3]=z[3]-0}e[0]=q++;return e},ATTR:function(C,z,A,e,D,E){var B=C[1].replace(/\\/g,"");if(!E&&m.attrMap[B]){C[1]=m.attrMap[B]}if(C[2]==="~="){C[4]=" "+C[4]+" "}return C},PSEUDO:function(C,z,A,e,D){if(C[1]==="not"){if((x.exec(C[3])||"").length>1||/^\w/.test(C[3])){C[3]=g(C[3],null,null,z)}else{var B=g.filter(C[3],z,A,true^D);if(!A){e.push.apply(e,B)}return false}}else{if(m.match.POS.test(C[0])||m.match.CHILD.test(C[0])){return true}}return C},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){e.parentNode.selectedIndex;return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(A,z,e){return !!g(e[3],A).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)}},setFilters:{first:function(z,e){return e===0},last:function(A,z,e,B){return z===B.length-1},even:function(z,e){return e%2===0},odd:function(z,e){return e%2===1},lt:function(A,z,e){return z<e[3]-0},gt:function(A,z,e){return z>e[3]-0},nth:function(A,z,e){return e[3]-0===z},eq:function(A,z,e){return e[3]-0===z}},filter:{PSEUDO:function(A,F,E,G){var e=F[1],z=m.filters[e];if(z){return z(A,E,F,G)}else{if(e==="contains"){return(A.textContent||A.innerText||g.getText([A])||"").indexOf(F[3])>=0}else{if(e==="not"){var B=F[3];for(var D=0,C=B.length;D<C;D++){if(B[D]===A){return false}}return true}else{g.error("Syntax error, unrecognized expression: "+e)}}}},CHILD:function(e,B){var E=B[1],z=e;switch(E){case"only":case"first":while((z=z.previousSibling)){if(z.nodeType===1){return false}}if(E==="first"){return true}z=e;case"last":while((z=z.nextSibling)){if(z.nodeType===1){return false}}return true;case"nth":var A=B[2],H=B[3];if(A===1&&H===0){return true}var D=B[0],G=e.parentNode;if(G&&(G.sizcache!==D||!e.nodeIndex)){var C=0;for(z=G.firstChild;z;z=z.nextSibling){if(z.nodeType===1){z.nodeIndex=++C}}G.sizcache=D}var F=e.nodeIndex-H;if(A===0){return F===0}else{return(F%A===0&&F/A>=0)}}},ID:function(z,e){return z.nodeType===1&&z.getAttribute("id")===e},TAG:function(z,e){return(e==="*"&&z.nodeType===1)||z.nodeName.toLowerCase()===e},CLASS:function(z,e){return(" "+(z.className||z.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(D,B){var A=B[1],e=m.attrHandle[A]?m.attrHandle[A](D):D[A]!=null?D[A]:D.getAttribute(A),E=e+"",C=B[2],z=B[4];return e==null?C==="!=":C==="="?E===z:C==="*="?E.indexOf(z)>=0:C==="~="?(" "+E+" ").indexOf(z)>=0:!z?E&&e!==false:C==="!="?E!==z:C==="^="?E.indexOf(z)===0:C==="$="?E.substr(E.length-z.length)===z:C==="|="?E===z||E.substr(0,z.length+1)===z+"-":false},POS:function(C,z,A,D){var e=z[2],B=m.setFilters[e];if(B){return B(C,A,z,D)}}}};g.selectors=m;var s=m.match.POS,n=function(z,e){return"\\"+(e-0+1)};for(var u in m.match){m.match[u]=new RegExp(m.match[u].source+(/(?![^\[]*\])(?![^\(]*\))/.source));m.leftMatch[u]=new RegExp(/(^(?:.|\r|\n)*?)/.source+m.match[u].source.replace(/\\(\d+)/g,n))}var f=function(z,e){z=Array.prototype.slice.call(z,0);if(e){e.push.apply(e,z);return e}return z};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(t){f=function(C,B){var z=B||[],A=0;if(j.call(C)==="[object Array]"){Array.prototype.push.apply(z,C)}else{if(typeof C.length==="number"){for(var e=C.length;A<e;A++){z.push(C[A])}}else{for(;C[A];A++){z.push(C[A])}}}return z}}var h;if(document.documentElement.compareDocumentPosition){h=function(z,e){if(!z.compareDocumentPosition||!e.compareDocumentPosition){if(z==e){w=true}return z.compareDocumentPosition?-1:1}var A=z.compareDocumentPosition(e)&4?-1:z===e?0:1;if(A===0){w=true}return A}}else{if("sourceIndex" in document.documentElement){h=function(z,e){if(!z.sourceIndex||!e.sourceIndex){if(z==e){w=true}return z.sourceIndex?-1:1}var A=z.sourceIndex-e.sourceIndex;if(A===0){w=true}return A}}else{if(document.createRange){h=function(B,z){if(!B.ownerDocument||!z.ownerDocument){if(B==z){w=true}return B.ownerDocument?-1:1}var A=B.ownerDocument.createRange(),e=z.ownerDocument.createRange();A.setStart(B,0);A.setEnd(B,0);e.setStart(z,0);e.setEnd(z,0);var C=A.compareBoundaryPoints(Range.START_TO_END,e);if(C===0){w=true}return C}}}}g.getText=function(e){var z="",B;for(var A=0;e[A];A++){B=e[A];if(B.nodeType===3||B.nodeType===4){z+=B.nodeValue}else{if(B.nodeType!==8){z+=g.getText(B.childNodes)}}}return z};(function(){var z=document.createElement("div"),A="script"+(new Date()).getTime();z.innerHTML="<a name='"+A+"'/>";var e=document.documentElement;e.insertBefore(z,e.firstChild);if(document.getElementById(A)){m.find.ID=function(C,D,E){if(typeof D.getElementById!=="undefined"&&!E){var B=D.getElementById(C[1]);return B?B.id===C[1]||typeof B.getAttributeNode!=="undefined"&&B.getAttributeNode("id").nodeValue===C[1]?[B]:undefined:[]}};m.filter.ID=function(D,B){var C=typeof D.getAttributeNode!=="undefined"&&D.getAttributeNode("id");return D.nodeType===1&&C&&C.nodeValue===B}}e.removeChild(z);e=z=null})();(function(){var e=document.createElement("div");e.appendChild(document.createComment(""));if(e.getElementsByTagName("*").length>0){m.find.TAG=function(z,D){var C=D.getElementsByTagName(z[1]);if(z[1]==="*"){var B=[];for(var A=0;C[A];A++){if(C[A].nodeType===1){B.push(C[A])}}C=B}return C}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){m.attrHandle.href=function(z){return z.getAttribute("href",2)}}e=null})();if(document.querySelectorAll){(function(){var e=g,A=document.createElement("div");A.innerHTML="<p class='TEST'></p>";if(A.querySelectorAll&&A.querySelectorAll(".TEST").length===0){return}g=function(E,D,B,C){D=D||document;if(!C&&D.nodeType===9&&!g.isXML(D)){try{return f(D.querySelectorAll(E),B)}catch(F){}}return e(E,D,B,C)};for(var z in e){g[z]=e[z]}A=null})()}(function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}m.order.splice(1,0,"CLASS");m.find.CLASS=function(z,A,B){if(typeof A.getElementsByClassName!=="undefined"&&!B){return A.getElementsByClassName(z[1])}};e=null})();function v(z,E,D,H,F,G){for(var B=0,A=H.length;B<A;B++){var e=H[B];if(e){e=e[z];var C=false;while(e){if(e.sizcache===D){C=H[e.sizset];break}if(e.nodeType===1&&!G){e.sizcache=D;e.sizset=B}if(e.nodeName.toLowerCase()===E){C=e;break}e=e[z]}H[B]=C}}}function y(z,E,D,H,F,G){for(var B=0,A=H.length;B<A;B++){var e=H[B];if(e){e=e[z];var C=false;while(e){if(e.sizcache===D){C=H[e.sizset];break}if(e.nodeType===1){if(!G){e.sizcache=D;e.sizset=B}if(typeof E!=="string"){if(e===E){C=true;break}}else{if(g.filter(E,[e]).length>0){C=e;break}}}e=e[z]}H[B]=C}}}g.contains=document.compareDocumentPosition?function(z,e){return !!(z.compareDocumentPosition(e)&16)}:function(z,e){return z!==e&&(z.contains?z.contains(e):true)};g.isXML=function(e){var z=(e?e.ownerDocument||e:0).documentElement;return z?z.nodeName!=="HTML":false};var o=function(e,F){var B=[],C="",D,A=F.nodeType?[F]:F;while((D=m.match.PSEUDO.exec(e))){C+=D[0];e=e.replace(m.match.PSEUDO,"")}e=m.relative[e]?e+"*":e;for(var E=0,z=A.length;E<z;E++){g(e,A[E],B)}return g.filter(C,B)};return g});b.register("core.dom.contains",function(e){return function(f,g){if(f===g){return false}else{if(f.compareDocumentPosition){return((f.compareDocumentPosition(g)&16)===16)}else{if(f.contains&&g.nodeType===1){return f.contains(g)}else{while(g=g.parentNode){if(f===g){return true}}}}}return false}});b.register("core.evt.addEvent",function(e){return function(f,j,h){var g=e.E(f);if(g==null){return false}j=j||"click";if((typeof h).toLowerCase()!="function"){return}if(g.attachEvent){g.attachEvent("on"+j,h)}else{if(g.addEventListener){g.addEventListener(j,h,false)}else{g["on"+j]=h}}return true}});b.register("core.evt.removeEvent",function(e){return function(g,j,h,f){var m=e.E(g);if(m==null){return false}if(typeof h!="function"){return false}if(m.removeEventListener){m.removeEventListener(j,h,f)}else{if(m.detachEvent){m.detachEvent("on"+j,h)}else{m["on"+j]=null}}return true}});b.register("core.util.browser",function(p){var f=navigator.userAgent.toLowerCase();var s=window.external||"";var h,j,n,t,o;var g=function(e){var m=0;return parseFloat(e.replace(/\./g,function(){return(m++==1)?"":"."}))};try{if((/windows|win32/i).test(f)){o="windows"}else{if((/macintosh/i).test(f)){o="macintosh"}else{if((/rhino/i).test(f)){o="rhino"}}}if((j=f.match(/applewebkit\/([^\s]*)/))&&j[1]){h="webkit";t=g(j[1])}else{if((j=f.match(/presto\/([\d.]*)/))&&j[1]){h="presto";t=g(j[1])}else{if(j=f.match(/msie\s([^;]*)/)){h="trident";t=1;if((j=f.match(/trident\/([\d.]*)/))&&j[1]){t=g(j[1])}}else{if(/gecko/.test(f)){h="gecko";t=1;if((j=f.match(/rv:([\d.]*)/))&&j[1]){t=g(j[1])}}}}}if(/world/.test(f)){n="world"}else{if(/360se/.test(f)){n="360"}else{if((/maxthon/.test(f))||typeof s.max_version=="number"){n="maxthon"}else{if(/tencenttraveler\s([\d.]*)/.test(f)){n="tt"}else{if(/se\s([\d.]*)/.test(f)){n="sogou"}}}}}}catch(r){}var u=f.indexOf("trident/7.0")!=-1&&(f.indexOf("rv 11.0")!=-1||f.indexOf("rv:11.0")!=-1);var q={OS:o,CORE:h,Version:t,EXTRA:(n?n:false),IE:/msie/.test(f)||u,OPERA:/opera/.test(f),MOZ:/gecko/.test(f)&&!/(compatible|webkit)/.test(f),IE5:/msie 5 /.test(f),IE55:/msie 5.5/.test(f),IE6:/msie 6/.test(f),IE7:/msie 7/.test(f),IE8:/msie 8/.test(f),IE9:/msie 9/.test(f),IE11:u,SAFARI:!/chrome\/([\d.]*)/.test(f)&&/\/([\d.]*) safari/.test(f),CHROME:/chrome\/([\d.]*)/.test(f),IPAD:/\(ipad/i.test(f),IPHONE:/\(iphone/i.test(f),ITOUCH:/\(itouch/i.test(f),MOBILE:/mobile/i.test(f)};return q});b.register("core.evt.getEvent",function(e){return function(){if(e.IE){return window.event}else{if(window.event){return window.event}var g=arguments.callee.caller;var f;var h=0;while(g!=null&&h<40){f=g.arguments[0];if(f&&(f.constructor==Event||f.constructor==MouseEvent||f.constructor==KeyboardEvent)){return f}h++;g=g.caller}return f}}});b.register("core.evt.fixEvent",function(e){return function(f){f=f||e.core.evt.getEvent();if(!f.target){f.target=f.srcElement;f.pageX=f.x;f.pageY=f.y}if(typeof f.layerX=="undefined"){f.layerX=f.offsetX}if(typeof f.layerY=="undefined"){f.layerY=f.offsetY}return f}});b.register("core.obj.isEmpty",function(e){return function(j,h){var g=true;for(var f in j){if(h){g=false;break}else{if(j.hasOwnProperty(f)){g=false;break}}}return g}});b.register("core.evt.delegatedEvent",function(f){var e=function(m,j){for(var h=0,g=m.length;h<g;h+=1){if(f.core.dom.contains(m[h],j)){return true}}return false};return function(h,n){if(!f.core.dom.isNode(h)){throw"core.evt.delegatedEvent need an Element as first Parameter"}if(!n){n=[]}if(f.core.arr.isArray(n)){n=[n]}var g={};var m=function(t){var p=f.core.evt.fixEvent(t);var s=p.target;var r=t.type;var u=function(){var x,v,w;x=s.getAttribute("action-target");if(x){v=f.core.dom.sizzle(x,h);if(v.length){w=p.target=v[0]}}u=f.core.func.empty;return w};var o=function(){var v=u()||s;if(g[r]&&g[r][q]){return g[r][q]({evt:p,el:v,box:h,data:f.core.json.queryToJson(v.getAttribute("action-data")||"")})}else{return true}};if(e(n,s)){return false}else{if(!f.core.dom.contains(h,s)){return false}else{var q=null;while(s&&s!==h){q=s.getAttribute("action-type");if(q&&o()===false){break}s=s.parentNode}}}};var j={};j.add=function(q,r,p){if(!g[r]){g[r]={};f.core.evt.addEvent(h,r,m)}var o=g[r];o[q]=p};j.remove=function(o,p){if(g[p]){delete g[p][o];if(f.core.obj.isEmpty(g[p])){delete g[p];f.core.evt.removeEvent(h,p,m)}}};j.pushExcept=function(o){n.push(o)};j.removeExcept=function(q){if(!q){n=[]}else{for(var p=0,o=n.length;p<o;p+=1){if(n[p]===q){n.splice(p,1)}}}};j.clearExcept=function(o){n=[]};j.destroy=function(){for(k in g){for(l in g[k]){delete g[k][l]}delete g[k];f.core.evt.removeEvent(h,k,m)}};return j}});b.register("core.util.easyTemplate",function(f){var e=function(h,m){if(!h){return""}if(h!==e.template){e.template=h;e.aStatement=e.parsing(e.separate(h))}var g=e.aStatement;var j=function(n){if(n){m=n}return arguments.callee};j.toString=function(){return(new Function(g[0],g[1]))(m)};return j};e.separate=function(g){var j=/\\'/g;var h=g.replace(/(<(\/?)#(.*?(?:\(.*?\))*)>)|(')|([\r\n\t])|(\$\{([^\}]*?)\})/g,function(n,m,t,s,r,q,p,o){if(m){return"{|}"+(t?"-":"+")+s+"{|}"}if(r){return"\\'"}if(q){return""}if(p){return"'+("+o.replace(j,"'")+")+'"}});return h};e.parsing=function(u){var t,j,o,h,n,m,p,q=["var aRet = [];"];p=u.split(/\{\|\}/);var g=/\s/;while(p.length){o=p.shift();if(!o){continue}n=o.charAt(0);if(n!=="+"&&n!=="-"){o="'"+o+"'";q.push("aRet.push("+o+");");continue}h=o.split(g);switch(h[0]){case"+et":t=h[1];j=h[2];q.push('aRet.push("<!--'+t+' start-->");');break;case"-et":q.push('aRet.push("<!--'+t+' end-->");');break;case"+if":h.splice(0,1);q.push("if"+h.join(" ")+"{");break;case"+elseif":h.splice(0,1);q.push("}else if"+h.join(" ")+"{");break;case"-if":q.push("}");break;case"+else":q.push("}else{");break;case"+list":q.push("if("+h[1]+".constructor === Array){with({i:0,l:"+h[1]+".length,"+h[3]+"_index:0,"+h[3]+":null}){for(i=l;i--;){"+h[3]+"_index=(l-i-1);"+h[3]+"="+h[1]+"["+h[3]+"_index];");break;case"-list":q.push("}}}");break;default:break}}q.push('return aRet.join("");');return[j,q.join("")]};return e});b.register("core.arr.indexOf",function(e){return function(h,j){if(j.indexOf){return j.indexOf(h)}for(var g=0,f=j.length;g<f;g++){if(j[g]===h){return g}}return -1}});b.register("core.arr.inArray",function(e){return function(f,g){return e.core.arr.indexOf(f,g)>-1}});b.register("core.func.getType",function(e){return function(f){var g;return((g=typeof(f))=="object"?f==null&&"null"||Object.prototype.toString.call(f).slice(8,-1):g).toLowerCase()}});b.register("core.dom.builder",function(e){function f(q,m){if(m){return m}var j,o=/\<(\w+)[^>]*\s+node-type\s*=\s*([\'\"])?(\w+)\2.*?>/g;var n={};var p,h,g;while((j=o.exec(q))){h=j[1];p=j[3];g=h+"[node-type="+p+"]";n[p]=n[p]==null?[]:n[p];if(!e.core.arr.inArray(g,n[p])){n[p].push(h+"[node-type="+p+"]")}}return n}return function(n,m){var g=e.core.func.getType(n)=="string";var q=f(g?n:n.innerHTML,m);var h=n;if(g){h=e.C("div");h.innerHTML=n}var r,p,o;o=e.core.dom.sizzle("[node-type]",h);p={};for(r in q){p[r]=e.core.dom.sizzle.matches(q[r].toString(),o)}var j=n;if(g){j=e.C("buffer");while(h.children[0]){j.appendChild(h.children[0])}}return{box:j,list:p}}});b.register("core.util.scrollPos",function(e){return function(h){h=h||document;var f=h.documentElement;var g=h.body;return{top:Math.max(window.pageYOffset||0,f.scrollTop,g.scrollTop),left:Math.max(window.pageXOffset||0,f.scrollLeft,g.scrollLeft)}}});b.register("core.dom.position",function(g){var e=function(n){var o,m,j,h,q,p;o=n.getBoundingClientRect();m=g.core.util.scrollPos();j=n.ownerDocument.body;h=n.ownerDocument.documentElement;q=h.clientTop||j.clientTop||0;p=h.clientLeft||j.clientLeft||0;return{l:parseInt(o.left+m.left-p,10)||0,t:parseInt(o.top+m.top-q,10)||0}};var f=function(j,h){var m;m=[j.offsetLeft,j.offsetTop];parent=j.offsetParent;if(parent!==j&&parent!==h){while(parent){m[0]+=parent.offsetLeft;m[1]+=parent.offsetTop;parent=parent.offsetParent}}if(g.core.util.browser.OPERA!=-1||(g.core.util.browser.SAFARI!=-1&&j.style.position=="absolute")){m[0]-=document.body.offsetLeft;m[1]-=document.body.offsetTop}if(j.parentNode){parent=j.parentNode}else{parent=null}while(parent&&!/^body|html$/i.test(parent.tagName)&&parent!==h){if(parent.style.display.search(/^inline|table-row.*$/i)){m[0]-=parent.scrollLeft;m[1]-=parent.scrollTop}parent=parent.parentNode}return{l:parseInt(m[0],10),t:parseInt(m[1],10)}};return function(m,h){if(m==document.body){return false}if(m.parentNode==null){return false}if(m.style.display=="none"){return false}var j=g.core.obj.parseParam({parent:null},h);if(m.getBoundingClientRect){if(j.parent){var q=e(m);var n=e(j.parent);return{l:q.l-n.l,t:q.t-n.t}}else{return e(m)}}else{return f(m,j.parent||document.body)}}});b.register("core.util.hideContainer",function(g){var h;var e=function(){if(h){return}h=g.C("div");h.style.cssText="position:absolute;top:-9999px;left:-9999px;";document.getElementsByTagName("head")[0].appendChild(h)};var f={appendChild:function(j){if(g.core.dom.isNode(j)){e();h.appendChild(j)}},removeChild:function(j){if(g.core.dom.isNode(j)){h&&h.removeChild(j)}}};return f});b.register("core.dom.getSize",function(f){var e=function(h){if(!f.core.dom.isNode(h)){throw"core.dom.getSize need Element as first parameter"}return{width:h.offsetWidth,height:h.offsetHeight}};var g=function(j){var h=null;if(j.style.display==="none"){j.style.visibility="hidden";j.style.display="";h=e(j);j.style.display="none";j.style.visibility="visible"}else{h=e(j)}return h};return function(j){var h={};if(!j.parentNode){f.core.util.hideContainer.appendChild(j);h=g(j);f.core.util.hideContainer.removeChild(j)}else{h=g(j)}return h}});b.register("kit.dom.parseDOM",function(e){return function(g){for(var f in g){if(g[f]&&(g[f].length==1)){g[f]=g[f][0]}}return g}});b.register("template.social.template",function(n){var m={};var g='<#et temp config><#if (config.showbutton == "y") ><a action-type="share" href="javascript:;" class="shareButton_btn"><img alt="share" src="http://img.t.sinajs.cn/t4/appstyle/widget/images/shareButton/shareButton_21.png"></a><#else><a action-type="share" href="javascript:;" class="shareButton_btn"><span title="微博" class="WB_logo16a">微博</span></a></#if></#et>';var j='<#et temp config><div class="WB_widgets social_followBtn social_followBtn_layer social_active" node-type="outer"><div class="soca_wrap"><div class="soac_follow"><div class="WB_FB_show clearfix ${config.showbutton == "y" ? "" : "FB_show_07"} " node-type="inner" style="display:none;"><div node-type="button" class="shareButton ${config.showbutton == "n" ? "shareButton_type06" : "shareButton_type07"} clearfix" style="float:left"></div></div><div class="soca_loading" node-type="loading" ><span class="WB_loadingB"></span></div></div></div></div></#et>';var f='<#et temp data><#if (data.social.indexOf("text") != -1) ><span class="WB_FB_info" node-type="userInfo"><#list data.user as list><#if (list_index < 2) ><a href="http://weibo.com/${list.profile_url}" target="_blank" action-type="hover" action-data="uid=${list.id}&screen_name=${list.screen_name}">${list.short_name}</a><#if (list.vip_type == 1) ><span class="WB_approve"></span></#if><#if (list.vip_type == 2) ><span class="WB_approve_co"></span></#if><#if (list_index == 0 && list_index + 1 != data.user.length) >,&nbsp;</#if></#if></#list><#if (parseInt(data.total, 10) <= 0) ><#if (data.follow == true) >${(data.att_type == 0) ? "赶快关注吧！" : ""}<#else>快成为第一个<a action-type="share" href="javascript:;" >分享</a>的人吧！</#if><#else><i class="FB_info_more"><#if (data.user.length != 0) >等<#else>共</#if>${data.total}人${(data.follow == true) ? "已关注" : "分享过"}</i></#if></span></#if><#if (data.social.indexOf("face") != -1) ><ul class="WB_uList clearfix" ><#list data.user as list><li action-type="hover" action-data="uid=${list.id}&screen_name=${list.screen_name}"><a href="http://weibo.com/${list.profile_url}" target="_blank"><img src="${list.profile_image_url}"></a> </li></#list></ul></#if></#et>';var h='<div class="WB_widgets WB_tips_black" node-type="outer" ><div node-type="inner"></div><span class="tm_arr" node-type="arrow"></span></div>';var e='<#et temp data><div class="WB_widgets social_active social_active_layer soac_active" style="position:absolute;z-index:9999;" node-type="outer"><div style="width:320px;" class="soac_active" ><p node-type="arrow" class="WBwidget_arrow_t WBwidget_arrow_tl W_bgcolor_arrow"><em class="W_arrline">◆</em><span>◆</span></p><div class="soac_box" node-type="inner"></div></div></div></#et>';m.shareBtnTemplate=g;m.layoutTemplate=j;m.listTemplate=f;m.tipTempalte=h;m.layerTemplate=e;return m});b.register("comp.social.io",function(h){var f={};var g="http://widget.weibo.com/";var e={list:"social/recommend.php",info:"social/conduct.php",top_domain:"social/top_by_domain.php",top_user:"social/top_by_user.php",share:"social/celebrity.php"};var j=function(o,n,m){h.core.io.jsonp({url:g+e[o],args:n,onComplete:function(p){m&&m(p)},onTimeout:function(p){m&&m(p)}})};f.jsonp=j;return f});b.register("core.dom.uniqueID",function(e){return function(f){return f&&(f.uniqueID||(f.uniqueID=e.core.util.getUniqueKey()))}});b.register("core.evt.custEvent",function(g){var e="__custEventKey__",h=1,j={},f=function(o,n){var m=(typeof o=="number")?o:o[e];return(m&&j[m])&&{obj:(typeof n=="string"?j[m][n]:j[m]),key:m}};return{define:function(q,o){if(q&&o){var n=(typeof q=="number")?q:q[e]||(q[e]=h++),p=j[n]||(j[n]={});o=[].concat(o);for(var m=0;m<o.length;m++){p[o[m]]||(p[o[m]]=[])}return n}},undefine:function(p,o){if(p){var n=(typeof p=="number")?p:p[e];if(n&&j[n]){if(o){o=[].concat(o);for(var m=0;m<o.length;m++){if(o[m] in j[n]){delete j[n][o[m]]}}}else{delete j[n]}}}},add:function(q,n,m,o){if(q&&typeof n=="string"&&m){var p=f(q,n);if(!p||!p.obj){throw"custEvent ("+n+") is undefined !"}p.obj.push({fn:m,data:o});return p.key}},once:function(q,n,m,o){if(q&&typeof n=="string"&&m){var p=f(q,n);if(!p||!p.obj){throw"custEvent ("+n+") is undefined !"}p.obj.push({fn:m,data:o,once:true});return p.key}},remove:function(r,p,o){if(r){var q=f(r,p),s,m;if(q&&(s=q.obj)){if(g.core.arr.isArray(s)){if(o){var n=0;while(s[n]){if(s[n].fn===o){break}n++}s.splice(n,1)}else{s.splice(0,s.length)}}else{for(var n in s){s[n]=[]}}return q.key}}},fire:function(n,t,r){if(n&&typeof t=="string"){var m=f(n,t),q;if(m&&(q=m.obj)){if(!g.core.arr.isArray(r)){r=r!=undefined?[r]:[]}for(var o=q.length-1;o>-1&&q[o];o--){var u=q[o].fn;var s=q[o].once;if(u&&u.apply){try{u.apply(n,[{type:t,data:q[o].data}].concat(r));if(s){q.splice(o,1)}}catch(p){g.log("[error][custEvent]"+p.message)}}}return m.key}}},destroy:function(){j={};h=1}}});b.register("core.str.encodeHTML",function(e){return function(f){if(typeof f!=="string"){throw"encodeHTML need a string as parameter"}return f.replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\'/g,"&#39").replace(/\u00A0/g,"&nbsp;").replace(/(\u0020|\u000B|\u2028|\u2029|\f)/g,"&#32")}});b.register("core.str.decodeHTML",function(e){return function(f){if(typeof f!=="string"){throw"decodeHTML need a string as parameter"}return f.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#39/g,"'").replace(/&nbsp;/g,"\u00A0").replace(/&#32/g,"\u0020").replace(/&amp;/g,"&")}});b.register("core.obj.beget",function(f){var e=function(){};return function(g){e.prototype=g;return new e()}});b.register("core.dom.setStyle",function(e){return function(f,g,h){if(e.IE){switch(g){case"opacity":f.style.filter="alpha(opacity="+(h*100)+")";if(!f.currentStyle||!f.currentStyle.hasLayout){f.style.zoom=1}break;case"float":g="styleFloat";default:f.style[g]=h}}else{if(g=="float"){g="cssFloat"}f.style[g]=h}}});b.register("core.dom.insertAfter",function(e){return function(g,h){var f=h.parentNode;if(f.lastChild==h){f.appendChild(g)}else{f.insertBefore(g,h.nextSibling)}}});b.register("core.dom.insertBefore",function(e){return function(g,h){var f=h.parentNode;f.insertBefore(g,h)}});b.register("core.dom.hasClassName",function(e){return function(g,f){return(new RegExp("\\b"+f+"\\b").test(g.className))}});b.register("core.dom.addClassName",function(e){return function(g,f){if(g.nodeType===1){if(!e.core.dom.hasClassName(g,f)){g.className+=(" "+f)}}}});b.register("core.dom.removeClassName",function(e){return function(g,f){if(g.nodeType===1){if(e.core.dom.hasClassName(g,f)){g.className=g.className.replace(new RegExp("\\b"+f+"\\b")," ")}}}});b.register("core.dom.trimNode",function(e){return function(g){var h=g.childNodes;for(var f=0;f<h.length;f++){if(h[f].nodeType==3||h[f].nodeType==8){g.removeChild(h[f])}}}});b.register("core.evt.fireEvent",function(e){return function(g,h){_el=e.E(g);if(e.IE){_el.fireEvent("on"+h)}else{var f=document.createEvent("HTMLEvents");f.initEvent(h,true,true);_el.dispatchEvent(f)}}});b.register("core.dom.getStyle",function(e){return function(g,j){if(e.IE){switch(j){case"opacity":var n=100;try{n=g.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(m){try{n=g.filters("alpha").opacity}catch(m){}}return n/100;case"float":j="styleFloat";default:var h=g.currentStyle?g.currentStyle[j]:null;return(g.style[j]||h)}}else{if(j=="float"){j="cssFloat"}try{var f=document.defaultView.getComputedStyle(g,"")}catch(m){}return g.style[j]||f?f[j]:null}}});b.register("core.dom.setXY",function(e){return function(f,m){var g=e.core.dom.getStyle(f,"position");if(g=="static"){e.core.dom.setStyle(f,"position","relative");g="relative"}var j=e.core.dom.position(f);if(j==false){return}var h={l:parseInt(e.core.dom.getStyle(f,"left"),10),t:parseInt(e.core.dom.getStyle(f,"top"),10)};if(isNaN(h.l)){h.l=(g=="relative")?0:f.offsetLeft}if(isNaN(h.t)){h.t=(g=="relative")?0:f.offsetTop}if(m.l!=null){f.style.left=m.l-j.l+h.l+"px"}if(m.t!=null){f.style.top=m.t-j.t+h.t+"px"}}});b.register("core.dom.cascadeNode",function(e){return function(h){var g={};var j=h.style.display||"";j=(j==="none"?"":j);var f=[];g.setStyle=function(n,m){e.core.dom.setStyle(h,n,m);if(n==="display"){j=(m==="none"?"":m)}return g};g.insertAfter=function(m){e.core.dom.insertAfter(m,h);return g};g.insertBefore=function(m){e.core.dom.insertBefore(m,h);return g};g.addClassName=function(m){e.core.dom.addClassName(h,m);return g};g.removeClassName=function(m){e.core.dom.removeClassName(h,m);return g};g.trimNode=function(){e.core.dom.trimNode(h);return g};g.removeNode=function(){e.core.dom.removeNode(h);return g};g.on=function(o,p){for(var n=0,m=f.length;n<m;n+=1){if(f[n]["fn"]===p&&f[n]["type"]===o){return g}}f.push({fn:p,type:o});e.core.evt.addEvent(h,o,p);return g};g.unon=function(o,p){for(var n=0,m=f.length;n<m;n+=1){if(f[n]["fn"]===p&&f[n]["type"]===o){e.core.evt.removeEvent(h,p,o);f.splice(n,1);break}}return g};g.fire=function(m){e.core.evt.fireEvent(m,h);return g};g.appendChild=function(m){h.appendChild(m);return g};g.removeChild=function(m){h.removeChild(m);return g};g.toggle=function(){if(h.style.display==="none"){h.style.display=j}else{h.style.display="none"}return g};g.show=function(){if(h.style.display==="none"){if(j==="none"){h.style.display=""}else{h.style.display=j}}return g};g.hidd=function(){if(h.style.display!=="none"){h.style.display="none"}return g};g.hide=g.hidd;g.scrollTo=function(m,n){if(m==="left"){h.scrollLeft=n}if(m==="top"){h.scrollTop=n}return g};g.replaceChild=function(m,n){h.replaceChild(m,n);return g};g.position=function(m){if(m!==undefined){e.core.dom.setXY(h,m)}return e.core.dom.position(h)};g.setPosition=function(m){if(m!==undefined){e.core.dom.setXY(h,m)}return g};g.getPosition=function(m){return e.core.dom.position(h)};g.html=function(m){if(m!==undefined){h.innerHTML=m}return h.innerHTML};g.setHTML=function(m){if(m!==undefined){h.innerHTML=m}return g};g.getHTML=function(){return h.innerHTML};g.text=function(m){if(m!==undefined){h.innerHTML=e.core.str.encodeHTML(m)}return e.core.str.decodeHTML(h.innerHTML)};g.ttext=g.text;g.setText=function(m){if(m!==undefined){h.innerHTML=e.core.str.encodeHTML(m)}return g};g.getText=function(){return e.core.str.decodeHTML(h.innerHTML)};g.get=function(m){if(m==="node"){return h}return e.core.dom.getStyle(h,m)};g.getStyle=function(m){return e.core.dom.getStyle(h,m)};g.getOriginNode=function(){return h};g.destroy=function(){for(var n=0,m=f;n<m;n+=1){e.core.evt.removeEvent(h,f[n]["fn"],f[n]["type"])}j=null;f=null;h=null};return g}});b.register("module.layer",function(f){var g=function(j){var h={};if(j.style.display=="none"){j.style.visibility="hidden";j.style.display="";h.w=j.offsetWidth;h.h=j.offsetHeight;j.style.display="none";j.style.visibility="visible"}else{h.w=j.offsetWidth;h.h=j.offsetHeight}return h};var e=function(n,m){m=m||"topleft";var j=null;if(n.style.display=="none"){n.style.visibility="hidden";n.style.display="";j=f.core.dom.position(n);n.style.display="none";n.style.visibility="visible"}else{j=f.core.dom.position(n)}if(m!=="topleft"){var h=g(n);if(m==="topright"){j.l=j.l+h.w}else{if(m==="bottomleft"){j.t=j.t+h.h}else{if(m==="bottomright"){j.l=j.l+h.w;j.t=j.t+h.h}}}}return j};return function(o){var r=f.core.dom.builder(o);var n=r.list.outer[0],j=r.list.inner[0];var q=f.core.dom.uniqueID(n);var p={};var h=f.core.evt.custEvent.define(p,"show");f.core.evt.custEvent.define(h,"hide");var m=null;p.show=function(){n.style.display="";f.core.evt.custEvent.fire(h,"show");return p};p.hide=function(){n.style.display="none";window.setTimeout(function(){f.core.evt.custEvent.fire(h,"hide")},0);return p};p.getPosition=function(s){return e(n,s)};p.getSize=function(s){if(s||!m){m=g.apply(p,[n])}return m};p.html=function(s){if(s!==undefined){j.innerHTML=s}return j.innerHTML};p.text=function(s){if(text!==undefined){j.innerHTML=f.core.str.encodeHTML(s)}return f.core.str.decodeHTML(j.innerHTML)};p.appendChild=function(s){j.appendChild(s);return p};p.getUniqueID=function(){return q};p.getOuter=function(){return n};p.getInner=function(){return j};p.getParentNode=function(){return n.parentNode};p.getDomList=function(){return r.list};p.getDomListByKey=function(s){return r.list[s]};p.getDom=function(t,s){if(!r.list[t]){return false}return r.list[t][s||0]};p.getCascadeDom=function(t,s){if(!r.list[t]){return false}return f.core.dom.cascadeNode(r.list[t][s||0])};return p}});b.register("core.util.winSize",function(e){return function(g){var f,j;if(g){target=g.document}else{target=document}if(target.compatMode==="CSS1Compat"){f=target.documentElement.clientWidth;j=target.documentElement.clientHeight}else{if(self.innerHeight){if(g){target=g.self}else{target=self}f=target.innerWidth;j=target.innerHeight}else{if(target.documentElement&&target.documentElement.clientHeight){f=target.documentElement.clientWidth;j=target.documentElement.clientHeight}else{if(target.body){f=target.body.clientWidth;j=target.body.clientHeight}}}}return{width:f,height:j}}});b.register("ui.tip",function(f){var e='<div style="position:absolute; width:200px; display:none;" class="tips WB_tips_yls" node-type="outer" ><span class="WB_tipS_err"></span><span class="WB_sp_txt" node-type="inner"></span><span class="arr" node-type="arrow"></span><a class="close" node-type="close" href="javascript:void(0)">×</a></div>';return function(h,v){var r=f.core.obj.parseParam({template:e},v);var o,n,q,p,u,x,g;var t=function(y){n.style.top=y.t+"px";n.style.left=y.l+"px";return p};var s=function(){var y=f.core.util.winSize();var z=o.getSize(true);n.style.top=f.core.util.scrollPos()["top"]+(y.height-z.h)/2+"px";n.style.left=(y.width-z.w)/2+"px";return p};var j=function(y){if(typeof y==="string"){q.innerHTML=y}else{q.appendChild(y)}return p};var m=function(y,z){u.className=y};var w=function(){o=f.module.layer(r.template);n=o.getOuter();q=o.getDom("inner");u=o.getDom("arrow");x=o.getDom("close");x&&f.core.evt.addEvent(x,"click",o.hide);o.hide();p=o;h&&j(h);document.body.appendChild(n)};w();p.setPosition=t;p.setMiddle=s;p.setContent=j;p.setArrow=m;return p}});b.register("common.extra.pos",function(e){var f=function(m,n){var h=e.core.util.scrollPos(),r=e.core.util.winSize(),p=e.core.dom.position(m),q=e.core.dom.getSize(m),g=e.core.dom.getSize(n),o=g.width,v=g.height;var s=p,u="tl";var j=p.l+o-h.left<r.width;var t=p.t+v-h.top<r.height;if(t){s.t+=q.height}if(!j){s.l-=o-q.width}if(!t){s.t-=v}if(!j&&t){u="tr"}else{if(!j&&!t){u="br"}else{if(j&&!t){u="bl"}}}return{pos:s,arrow:u}};return function(h,g){var j=f(h,g);return j}});b.register("kit.extra.merge",function(e){return function(g,f){var j={};for(var h in g){j[h]=g[h]}for(var h in f){j[h]=f[h]}return j}});b.register("common.social.statistical",function(f){var e="http://rs.sinajs.cn/tmp.gif?";return function(j){var h={};var g=f.kit.extra.merge({id:"hotlist",refer:document.location.hostname},j);h.request=function(n){n=f.kit.extra.merge(n,g);var o="";for(var m in n){o+=(m+"="+encodeURIComponent(n[m])+"&")}o+="r="+(new Date()).valueOf();var p=new Image();p.src=e+o};return h}});b.register("widget.social.bubble",function(h){var g=h.core.util.easyTemplate,f=h.template.social.template;var e={};return function(j,u){var t={};var j,y,m,r,n,q;var p=h.common.social.statistical({band:u.band});var z=function(){w();o();s()};var w=function(){};var o=function(){var A=(u.popup=="tip")?f.tipTempalte:f.layerTemplate;y=h.ui.tip("",{template:A})};var s=function(){m=h.core.evt.delegatedEvent(j.outer);m.add("hover","mouseover",v.delay);m.add("hover","mouseout",v.hide);m.add("hover","click",function(B){v.suda(B,"userclk")});if(u.popup=="layer"){var A=y.getOuter();h.core.evt.addEvent(A,"mouseover",function(){clearTimeout(n)});h.core.evt.addEvent(A,"mouseout",function(){n=setTimeout(function(){y.hide()},100)});r=h.core.evt.delegatedEvent(A);r.add("linkclk","click",function(B){v.suda(B,"linkclk")})}};var v={delay:function(A){clearTimeout(n);n=setTimeout(function(){v.show(A)},100)},show:function(F){if(F.data.social=="true"&&u.popup=="layer"){return}var D=F.el,C=F.data.uid,H=h.core.dom.position(D),A="";if(u.popup=="tip"){H.t-=25;A=F.data.screen_name;y.setContent(A).setPosition(H).show()}else{A='<div class="soca_statebox"><span class="WB_loadingB"></span></div>';var E=(u.widget=="share"||u.widget=="hotlist")?"share":"followbutton";var B={project:E,uid:C},G=function(J){if(J&&J.code=="100000"){html=J.data;e[C]=J}else{html="加载失败";delete e[C]}y.setContent(html);var I=h.common.extra.pos(D,y.getOuter());var K="WBwidget_arrow_t WBwidget_arrow_"+I.arrow+" W_bgcolor_arrow";K=(I.arrow.indexOf("b")!=-1)?K.replace("WBwidget_arrow_t","WBwidget_arrow_b"):K;y.setPosition(I.pos);y.setArrow(K);y.show()};if(e[C]){G(e[C])}else{h.comp.social.io.jsonp("info",B,G)}if(u.widget=="hotlist"){return}h.common.social.suda("hover",window.social.uid)}},hide:function(A){clearTimeout(n);n=setTimeout(function(){y.hide()},300)},suda:function(B,A){if(u.widget=="hotlist"){p.request({action:"linkclk"});return}h.common.social.suda(A,window.social.uid)}};var x=function(){};z();t.destroy=x;return t}});b.register("kit.io.cssLoader",function(h){var f="";var e="http://img.t.sinajs.cn/t4/";var j="http://timg.sjs.sinajs.cn/t4/";if(typeof $CONFIG!="undefined"){e=$CONFIG.cssPath||e;f=$CONFIG.version||""}var g={};return function(o,m){if(!o){return}var u=h.core.obj.parseParam({load_ID:"social_css_load_status",complete:function(){},timeout:function(){},version:new Date().valueOf(),notCdn:false},m);var t=u.load_ID,r=u.version,q=u.complete,x=u.timeout,z=u.notCdn;var y=function(D,B){var C=g[D]||(g[D]={loaded:false,list:[]});if(C.loaded){B(D);return false}C.list.push(B);if(C.list.length>1){return false}return true};var s=function(C){var B=g[C].list;for(var D=0;D<B.length;D++){B[D](C)}g[C].loaded=true;delete g[C].list};if(!y(o,q)){return}var w;if(z){w=j+o}else{w=e+o+"?version="+r}var v=h.C("link");v.setAttribute("rel","Stylesheet");v.setAttribute("type","text/css");v.setAttribute("charset","utf-8");v.setAttribute("href",w);document.getElementsByTagName("head")[0].appendChild(v);var n=h.C("div");n.id=t;h.core.util.hideContainer.appendChild(n);var A=3000;var p=function(){if(parseInt(h.core.dom.getStyle(n,"height"))==42){h.core.util.hideContainer.removeChild(n);s(o);return}if(--A>0){setTimeout(p,10)}else{h.core.util.hideContainer.removeChild(n);delete g[o];x()}};setTimeout(p,50)}});b.register("widget.social.follow",function(h){var g=h.core.util.easyTemplate,f=h.template.social.template,j=h.core.io.jsonp;var e="appstyle/widget/css/socialRelations/social_active.css";return function(r,s){var q={};var n,m,x;s.widget="follow";s.popup="tip";s.noshare="0";s.showbutton="n";var w=function(){t();o();p()};var v=function(){var z=g(f.layoutTemplate,s).toString();var A=h.core.dom.builder(z);m=h.kit.dom.parseDOM(A.list);x=m.outer;if(/^(\d+)$/.test(s.width)){x.style.width=parseInt(s.width,10)+"px"}if(/^(\d+)$/.test(s.height)){x.style.height=parseInt(s.height,10)+"px"}r.innerHTML="";r.appendChild(A.box);var y={project:"followbutton",uid:s.uid},B=function(E){if(E&&E.code=="100000"){E.data.social=s.social;E.data.follow=true;var D=g(f.listTemplate,E.data).toString();var F=h.core.dom.builder(D);m.inner.appendChild(F.box);var C=function(){m.inner.style.display="";m.loading.style.display="none"};h.kit.io.cssLoader(e,{complete:C,timeout:C,notCdn:true})}};h.comp.social.io.jsonp("list",y,B)};var t=function(){};var o=function(){v();h.widget.social.bubble(m,s)};var p=function(){};var u=function(){};w();q.destroy=u;q.btnBox=m.button;return q}});b.register("core.util.pageSize",function(e){return function(h){if(h){target=h.document}else{target=document}var o=(target.compatMode=="CSS1Compat"?target.documentElement:target.body);var n,g;var m,j;if(window.innerHeight&&window.scrollMaxY){n=o.scrollWidth;g=window.innerHeight+window.scrollMaxY}else{if(o.scrollHeight>o.offsetHeight){n=o.scrollWidth;g=o.scrollHeight}else{n=o.offsetWidth;g=o.offsetHeight}}var f=e.core.util.winSize(h);if(g<f.height){m=f.height}else{m=g}if(n<f.width){j=f.width}else{j=n}return{page:{width:j,height:m},win:{width:f.width,height:f.height}}}});b.register("template.button.followButton",function(j){var h={};var g='<#et temp config><div class="WB_widgets WB_followButton"><div class="clearfix"><#if (config["show_head"] == true) ><div class="WB_UserAvatar"><img node-type="profilePic" alt="" src="${config.user.profile_image_url}"></div></#if><div class="WB_UserInfo" ${(config["show_head"] == true) ? \'\' : \'style="margin-left:0;"\'} ><#if (config["show_name"] == true) ><p class="WB_UserName" node-type="nameBox"><a href="http://www.weibo.com/${(config.user.domain != "") ? (config.user.domain) : (config.user.id)}" target="_blank" >${config.user.name}</a><#if (config.user.verified == true) > <span class="WB_approve"></span></#if></p></#if><p class="WB_UserStat" node-type="btnbox" ></p></div></div></div></#et>';var m='<#et temp data><span class="${data.btncss}" node-type="followBtn"><span> <em class="${data.imgcss}" node-type="followImg" ></em><em>${data.btntxt}</em><#if ((data.cancel == "true" || data.cancel == true) && (data.alias == "each" || data.alias == "has")) ><em class="WB_btnL">|</em><em><a href="javascript:void(0);" node-type="followCancel" class="W_linkb">取消</a></em></#if></span></span></#et>';var e='<#et temp config><div class="follow_btn_line" node-type="inner"><a class="follow_btn status_followed" node-type="followBtn" target="_blank" title="#L{已关注}" href="http://weibo.com/u/${config.uid}"><cite class="follow_btn_inner"><u class="WB_ico_logo"></u><cite class="follow_text">#L{新动态}</cite></cite></a></div></#et>';var f='<#et temp data><#if (data.style == 1) ><#elseif (data.style == 2) ><cite class="follow_data"><a title="${data.total} #L{粉丝}" target="_blank" href="http://weibo.com/${data.currentUser.profile_url}" class="data_link">${data.total}</a><cite class="data_arrow"></cite></cite><#elseif (data.style == 3) ><cite class="follow_intro"><a title="${data.currentUser.screen_name}" target="_blank" href="http://weibo.com/${data.currentUser.profile_url}" class="follow_name name_bold">${data.currentUser.screen_name}</a><#if (data.currentUser.vip_type == 1) ><u class="WB_ico_approve"></u><#elseif (data.currentUser.vip_type == 2) ><u class="WB_ico_approve_co"></u></#if><cite class="intro_data">(#L{粉丝}${data.total})</cite></cite><#elseif (data.style == 4) ><cite class="follow_intro"><#list data.user as user><#if (user_index == 0) ><a target="_blank" title="${user.screen_name}" href="http://weibo.com/${user.profile_url}" class="follower_name">${user.short_name}</a></#if></#list><cite class="follow_display">#L{等}${data.total}人#L{已关注}</cite></cite><div class="follow_list_container"><ul class="follower_list"><#list data.user as user><li class="follower_item"><a target="_blank" href="http://weibo.com/${user.profile_url}" class="follower_item_a"><img width="30" height="30" title="${user.screen_name}" alt="${user.screen_name}" src="${user.profile_image_url}" class="follower_item_a_img"></a></li></#list></ul></div></#if></#et>';h.layoutTemplate=g;h.buttonTemplate=m;h.buttonWithCardTemplete=e;h.fansTemplate=f;return h});b.register("core.util.cookie",function(f){var e={set:function(m,p,o){var g=[];var n,j;var h=f.core.obj.parseParam({expire:null,path:"/",domain:null,secure:null,encode:true},o);if(h.encode==true){p=escape(p)}g.push(m+"="+p);if(h.path!=null){g.push("path="+h.path)}if(h.domain!=null){g.push("domain="+h.domain)}if(h.secure!=null){g.push(h.secure)}if(h.expire!=null){n=new Date();j=n.getTime()+h.expire*3600000;n.setTime(j);g.push("expires="+n.toGMTString())}document.cookie=g.join(";")},get:function(j){j=j.replace(/([\.\[\]\$])/g,"\\$1");var h=new RegExp(j+"=([^;]*)?;","i");var m=document.cookie+";";var g=m.match(h);if(g){return g[1]||""}else{return""}},remove:function(g,h){h=h||{};h.expire=-10;e.set(g,"",h)}};return e});var d={"加载中...":"載入中...","已关注":"已關注","加关注":"加關注","新动态":"新動態","粉丝":"粉絲","关闭":"關閉","这里可以直接查看微博动态":"這裡可以直接查看微博動態"};b.register("core.util.language",function(e){return function(f,g){return f.replace(/#L\{((.*?)(?:[^\\]))\}/ig,function(){var j=arguments[1];var h;if(g&&g[j]!==undefined){h=g[j]}else{h=j}return h})}});b.register("core.util.templet",function(e){return function(f,g){return f.replace(/#\{(.+?)\}/ig,function(){var n=arguments[1].replace(/\s/ig,"");var j=arguments[0];var o=n.split("||");for(var m=0,h=o.length;m<h;m+=1){if(/^default:.*$/.test(o[m])){j=o[m].replace(/^default:/,"");break}else{if(g[o[m]]!==undefined){j=g[o[m]];break}}}return j})}});b.register("ex.kit.language",function(e){window.$LANG||(window.$LANG={});return function(g){var f={};g=g||"zh_cn";return function(h,j){var m=m=e.core.util.language(h);if(g==="zh_tw"){m=e.core.util.language(h,d)}m=m.replace(/\\}/ig,"}");j&&(m=e.core.util.templet(m,j));return m}}});b.register("widget.social.followv2",function(j){var r=j.template.button.followButton,m=r.buttonWithCardTemplete,n=r.fansTemplate;var u='<div class="usercard_layer" style="visibility:hidden;" node-type="cardContainer"><div class="usercard_layer_outside"><div class="usercard_layer_inside" node-type="cardInner"></div><div class="layer_arrow_inside" node-type="inside_arrow"></div><div class="layer_arrow_outside" node-type="outside_arrow"></div></div></div>';var s='<div class="follow_tips" node-type="follow_tips" style="visibility:hidden;"><div class="follow_tips_outside"><div class="follow_tips_inside"><div class="follow_tips_content"><u class="status_icon status_beginner"></u><cite class="follow_tips_content_text">#L{这里可以直接查看微博动态}</cite></div><a class="close_button" node-type="close_button" title="#L{关闭}" href="javascript:;"></a><div class="tips_arrow" node-type="tips_arrow" style="left:10px;" node-type="tips_arrow"></div></div></div></div>';var w='<div class="card_loading_container"><u class="WB_ico_loading"></u></div>';var q="http://widget.weibo.com";var v={card:q+"/public/aj_namecard.php",fans:q+"/social/rec_by_fans.php"};var p="appstyle/widget/css/followWithCard/followWithCard.css";var h=j.core.evt.addEvent;var f=j.core.util.cookie;var g=j.core.dom.contains;var t=j.core.io.jsonp;var e=j.core.util.easyTemplate;var o=j.core.dom.builder;return function(x,J,I){var G={},T,Q,X,C,U,z,A,K;var ab=J.language||"zh_cn",R=j.ex.kit.language(ab);var P={};var S=function(){if(null==x){throw"Node is not defined"}var ad=j.core.dom.sizzle(".WB_floatContainer");for(var ac=0;ac<ad.length;ac++){document.body.removeChild(ad[ac])}};var aa={tip:null,isOk:false,arrow:null,closeButton:null,destroy:function(){if(aa.tip!=null){C.removeChild(aa.tip);aa.tip=null}},init:function(){var ae=j.core.dom.position(Q);if(ae.l==0&&ae.t==0){return}var ac=j.kit.dom.parseDOM(o(R(s)).list);aa.tip=ac.follow_tips;aa.closeButton=ac.close_button;aa.arrow=ac.tips_arrow;h(aa.closeButton,"click",aa.hide);aa.setOk();if(aa.isOk){C.appendChild(aa.tip);var ad=j.core.dom.getSize(aa.tip);aa.tip.style.top=ae.t-ad.height-5+"px";aa.tip.style.left=ae.l-10+"px";setTimeout(aa.show,300)}},show:function(){aa.tip.style.display="block";aa.tip.style.visibility="visible"},setOk:function(){K=f.get("followButtonTipCount");if(0==K.length){f.set("followButtonTipCount",0,null)}else{K=parseInt(K,10);K++;if(K<2){aa.isOk=true;f.set("followButtonTipCount",K,null)}else{aa.isOk=false}}},hide:function(){if(null!=U){clearTimeout(U)}aa.tip.style.display="none";j.core.evt.removeEvent(aa.closeButton,"click",aa.hide)}};var E={card:null,init:function(){if(null==E.card){var ac=j.kit.dom.parseDOM(o(u).list);E.card=ac.cardContainer;E.card.style.zIndex="9999";E.cardOutArrow=ac.outside_arrow;h(E.card,"mouseover",O);h(E.card,"mouseout",L);h(E.card,"click",M)}},show:function(ac){var ad=w;C.appendChild(E.card);if(null!=P[J.uid]){ad=P[J.uid];W(ad)}else{t({url:v.card,args:{fuid:J.uid,language:ab},onComplete:function(ae){if("100000"==ae.code){P[J.uid]=ae.data;ad=ae.data;W(ad)}}})}},getCardPosition:function(ae,ad){var aj=j.core.dom.position(ae);var ah=j.core.util.pageSize();var ac=j.core.util.scrollPos();var an=j.core.dom.getSize(ad);var ak=an.width;var ag=an.height;var ai=aj.t;var al=aj.l;var am=al+ak-ac.left<ah.win.width;var af=ai+ag-ac.top<ah.win.height;if(af){ai+=ae.offsetHeight+3}if(!am){al-=ak-ae.offsetWidth+7;E.cardOutArrow.className=" layer_arrow_outside_b";E.cardInnerArrow.className=" layer_arrow_inside_b"}if(!af){ai-=ag+5;E.cardOutArrow.className="layer_arrow_outside_c";E.cardInnerArrow.className="layer_arrow_inside_c"}if(!am&&!af){E.cardOutArrow.className="layer_arrow_outside_d";E.cardInnerArrow.className="layer_arrow_inside_d"}return{t:(ai),l:(al-15)}},hide:function(){E.card.style.visibility="hidden"}};var W=function(ad){A=A||j.kit.dom.parseDOM(o(E.card).list).cardInner;A.innerHTML=ad;E.cardInnerArrow=j.kit.dom.parseDOM(o(E.card).list).inside_arrow;E.cardOutArrow.className="layer_arrow_outside_a";E.cardInnerArrow.className="layer_arrow_inside_a";var ac=E.getCardPosition(Q,E.card);E.card.style.top=ac.t+"px";E.card.style.left=ac.l+"px";E.card.style.visibility="visible";F({ac:"hover"})};var D=function(ac){clearTimeout(U);E.init();if(E.card.style.visibility=="hidden"){E.show()}};var Z=function(ac){U=window.setTimeout(E.hide,20)};var O=function(ac){clearTimeout(U);U=null};var L=function(ac){U=window.setTimeout(E.hide,20)};var M=function(ac){ac=j.core.evt.fixEvent(ac);if(ac.target.tagName.toLowerCase()==="a"){F({ac:"clicklink"})}};var H=function(ac){t({url:v.fans,args:{uid:J.uid,language:ab},onComplete:function(ad){if(ad.code==="100000"){var ag=ad.data;ag.style=J.style;var ae=e(R(n),ag).toString();var af=o(ae);T.inner.appendChild(af.box)}}})};var y=function(){var ac=e(R(m),J).toString();X=o(ac);T=j.kit.dom.parseDOM(X.list);Q=T.followBtn};var B=function(){h(Q,"mouseover",D);h(Q,"mouseout",Z);h(Q,"click",function(){F({ac:"clickButton"})})};var F=function(af){var ae="http://rs.sinajs.cn/tmp.gif?",ah={id:"followbutton",oid:J.uid,uid:I||af.uid,action:af.ac,refer:document.referrer,r:+(new Date())};var ad=[];for(var ag in ah){ad.push(ag+"="+encodeURIComponent(ah[ag]||""))}ae+=ad.join("&");var ac=new Image();ac.src=ae};var Y=function(){N();F({ac:"view"})};var N=function(){var ac=function(){z=document.createElement("div");if(/^(\d+)$/.test(J.width)){z.style.width=parseInt(J.width,10)+"px"}if(/^(\d+)$/.test(J.height)){z.style.height=parseInt(J.height,10)+"px"}z.className="WB_widget WB_follow_ex";z.style.overflow="hidden";z.appendChild(X.box);x.innerHTML="";x.appendChild(z);C=document.createElement("div");C.className="WB_widget WB_follow_ex WB_floatContainer";document.body.appendChild(C);H()};j.kit.io.cssLoader(p,{load_ID:"followbutton_css_load_status",complete:ac,timeout:ac})};var V=function(){S();y();Y();B()};V();G.destroy=function(){aa.destroy()};G.id=new Date().toString();return G}});b.register("widget.iframe.follow",function(f){var j="http://widget.weibo.com/relationship/followbutton.php";var g="http://widget.weibo.com/public/aj_relationship.php";var e=[{W:67,H:24},{W:136,H:24},{W:245,H:24},{W:240,H:64}];var h=function(m){m=parseInt(m,10);m=(m>e.length||m<1)?1:m;return e[m-1]};return function(u){var p={};var v=f.common.iframe(),r=false;var q=f.core.obj.parseParam({dom:null,uid:"",type:"red_1",social:null,width:null,height:60,language:"zh_cn"},u);var o=q.dom;if(!o){throw"no avaliable dom element found."}if(f.kit.extra.isNull(q.uid)){throw"no avaliable uid found."}var s=q.type.split("_"),n=s[0].replace("gray","light"),m=s[1];var t=function(y){y=y||o;var x=h(m),B=r?x.W:(q.width||x.W),w=(q.height==60)?x.H:q.height;var A={btn:n,style:m,uid:q.uid,width:B,height:w,language:q.language};if(q.social!=null){A.social=q.social.replace(",","_");A.domain=document.domain}var z=f.kit.extra.jsonToUrl(A,j);v.insertIFrame({url:z,root:y,width:B,height:w})};r=(q.social!=null&&s[1]==4);if(r){m=1;o=f.widget.social.follow(o,q).btnBox;t(o)}else{f.core.io.jsonp({url:g,args:{fuid:q.uid},onComplete:function(w){if(w.data.login&&(w.data.relation==3||w.data.relation==1)){q.style=m;f.widget.social.followv2(o,q,w.data.uid)}else{t()}},onTimeout:null})}return p}});b.register("common.social.util",function(f){var e={};e.filter=function(g){if(typeof g!="string"){return g}if(g.toLowerCase()=="y"){return"1"}else{if(g.toLowerCase()=="n"){return"0"}else{return g}}};e.getWidgetType=function(h){var g=(h.showbutton=="y")?"btn":"icon";return g+"_"+h.social.replace(",","_")};return e});b.register("common.social.analytics",function(j){var e=document.location.protocol.indexOf("https")>-1?"https://":"http://",h="beacon.sina.com.cn";var g=e+h+"/e.gif";var f="http://rs.sinajs.cn/social.gif";return function(q){var p={};var n=j.core.obj.parseParam({gid:"",sid:"",uid:"",sup:"",acode:"weibo_socialshare_widget",aext:"",referer:"",href:document.location.href,requrl:""},q);var s="?UATrack||"+n.gid+"||"+n.sid+"||::"+n.uid+"::||"+n.acode+"||"+n.aext+"||"+n.referer+"||"+n.href+"||"+n.requrl+"||&gUid_"+(new Date().valueOf());var m=g+s;var r=f+s;var o=new Image();o.src=m;var o=new Image();o.src=r;return p}});b.register("common.social.suda",function(e){return function(j,f,g){var h={};g=typeof g=="undefined"?"":":"+g;e.common.social.analytics({uid:f,aext:j+":"+f+":"+document.domain+g});return h}});b.register("widget.social.share",function(n){var m=n.core.util.easyTemplate,j=n.core.evt.addEvent,o=n.core.evt.removeEvent,f=n.core.dom.builder,h=n.template.social.template;var g="appstyle/widget/css/socialRelations/social_active.css";function e(p){var q=new RegExp("(^|&)"+p+"=([^&]*)(&|$)");var s=window.location.search.substr(1).match(q);return s!=null?s[2]:""}return function(u,v){var t={};var q,p,C,y;v.widget="share";v.popup="layer";var z=function(){var G=m(h.layoutTemplate,v).toString();var J=f(G);p=n.kit.dom.parseDOM(J.list);C=p.outer;var D=m(h.shareBtnTemplate,v).toString();var F=f(D);p.button.appendChild(F.box);if(/^(\d+)$/.test(v.width)){p.outer.style.width=parseInt(v.width,10)+"px"}if(/^(\d+)$/.test(v.height)){p.outer.style.height=parseInt(v.height,10)+"px"}u.innerHTML="";u.removeAttribute("title");u.appendChild(J.box);var I=v.url;var H=n.core.dom.sizzle('meta[property="og:url"]');if(H&&H[0]){I=H[0].getAttribute("content");I+="&is_og=1"}var E={project:"share",longlink:I},K=function(N){if(N&&N.code=="100000"){N.data.social=v.social;var M=m(h.listTemplate,N.data).toString();var P=n.core.dom.builder(M);p.inner.appendChild(P.box);var L=function(){p.inner.style.display="";p.loading.style.display="none"};n.kit.io.cssLoader(g,{complete:L,timeout:L,notCdn:true});window.social=window.social||{};window.social.uid=N.data.uid;var O=n.common.social.util.getWidgetType({showbutton:v.showbutton,social:v.social});n.common.social.suda("pv",N.data.uid,O)}};n.comp.social.io.jsonp("list",E,K)};var A=function(){var D=n.core.json.jsonToQuery(v);window.open("http://service.weibo.com/share/share.php?"+D,"_blank","width=615,height=505");n.common.social.suda("shareclk",social.uid)};var w=function(){};var r=function(){z();n.widget.social.bubble(p,v)};var s=function(){y=n.core.evt.delegatedEvent(C);y.add("share","click",A)};var x=function(){};var B=function(){w();r();s()};B();t.destroy=x;t.btnBox=p.button;return t}});b.register("widget.iframe.share",function(g){var j="http://service.weibo.com/staticjs/weiboshare.html";var f={button_big:{W:142,H:66,type:4},button_middle:{W:106,H:58,type:5},button_small:{W:86,H:50,type:6},icon_big:{W:55,H:66,type:1},icon_middle:{W:90,H:24,type:2},icon_small:{W:72,H:16,type:3}};var e={full:{W:312,H:62},text:{W:312,H:25},simple:{W:65,H:25},number:{W:128,H:25}};var h=function(m){return f[m]||f.icon_small};return function(w){var r={};var y=g.common.iframe();var s=g.core.obj.parseParam({dom:null,url:null,type:"icon",size:"small",count:"y",ralateuid:"",title:"",default_text:"",picture_search:true,pic:"",addition:null,social:null,width:null,height:60,showbutton:"y",language:"zh_cn",appkey:""},w);var o=s.dom;if(!o){throw"no avaliable dom element found."}var v=h(s.type+"_"+s.size),n=v.W,x=v.H,u=v.type,q=s.count=="y"?1:0;var t={url:encodeURIComponent(s.url||window.location.href),type:u,count:q,ralateUid:s.ralateuid,language:s.language,appkey:s.appkey,title:s.default_text||s.title,pic:s.pic,showbutton:s.showbutton};if(s.social){t.social=s.social;t.width=s.width;t.height=s.height;g.widget.social.share(o,t);return}var p=s.addition;if(p){t.type=s.type;t.searchPic=s.picture_search;t.style=p;delete t.count;delete t.showbutton;n=e[p]["W"];n=s.type=="icon"?n-47:n;x=e[p]["H"];if(p=="simple"||p=="number"){j="http://service.weibo.com/staticjs/weibosharev2.html"}else{j="http://service.weibo.com/share/share_social.php"}}var m=g.kit.extra.jsonToUrl(t,j);y.insertIFrame({url:m,root:o,width:n,height:x});return r}});b.register("kit.extra.clone",function(e){function f(n,g){g=g||false;var j;if(n instanceof Array){j=[];var m=n.length;while(m--){if(g){j[m]=f(n[m])}else{j[m]=n[m]}}return j}else{if(n instanceof Object){j={};for(var h in n){if(g){j[h]=f(n[h])}else{j[h]=n[h]}}return j}else{return n}}}return f});b.register("widget.iframe.live",function(e){var h="http://widget.weibo.com/livestream/listlive.php";var g=["silver","blue","pink","green","yellow","orange","purple","skyblue","gray","black"];var f=function(j){return e.core.arr.indexOf(j,g)+1};return function(t){var r={};var u=e.common.iframe();var s=e.core.obj.parseParam({dom:null,topic:"",publish:"y",talk:"y",refer:"y",titlebar:"y",border:"y",uid:"",listid:"",member:"y",width:"280",height:"500",skin:"silver",color:"",colordiy:"0",ptype:"1",language:"zh_cn",appkey:""},t);var o=s.dom;if(!o){throw"no avaliable dom element found."}var p=e.kit.extra.clone(s);if(p.color!=""){p.colordiy="1"}var q=p.topic;if(q!=""){if(q.indexOf("|")!=-1){var n=q.split("|");p.ptopic=n[0];p.atopic=n[1]}else{p.atopic=p.ptopic=q}}var m=p.width;if(m=="auto"){p.width="0";m="100%"}p.at=p.member;p.skin=f(p.skin);delete p.dom;delete p.topic;var j=e.kit.extra.jsonToUrl(p,h);u.insertIFrame({url:j,root:o,width:m,height:p.height});return r}});b.register("widget.iframe.bulkfollow",function(e){var f="http://widget.weibo.com/relationship/bulkfollow.php";return function(g){var n={};var p=e.common.iframe();var m=e.core.obj.parseParam({dom:null,uids:"",sense:"n",titlebar:"y",info:"y",verified:"y",count:"5",width:"575",height:"489",type:"1",color:"C2D9F2,FFFFFF,0082CB,666666",nick:0,language:"zh_cn"},g);var o=m.dom;if(!o){throw"no avaliable dom element found."}var j=e.kit.extra.clone(m);j.showtitle=j.titlebar;j.showinfo=j.info;j.wide=j.type;j.refer=encodeURIComponent(document.location.href);delete j.dom;delete j.titlebar;delete j.info;delete j.type;var h=e.kit.extra.jsonToUrl(j,f);p.insertIFrame({url:h,root:o,width:j.width,height:j.height});return n}});b.register("widget.iframe.list",function(e){var h="http://widget.weibo.com/list/list.php";var g=["silver","blue","pink","green","yellow","orange","purple","skyblue","gray","black"];var f=function(j){return e.core.arr.indexOf(j,g)};return function(j){var p={};var r=e.common.iframe();var o=e.core.obj.parseParam({dom:null,uid:"",border:"y",creater:"y",infobar:"y",titlebar:"y",footbar:"n",info:"y",sidebar:"y",listid:"",width:"300",height:"500",color:"",skin:"",language:"zh_cn",appkey:""},j);var q=o.dom;if(!q){throw"no avaliable dom element found."}var n=e.kit.extra.clone(o);n.isborder=n.border;n.showcreate=n.creater;n.skin=f(n.skin);delete n.dom;delete n.border;delete n.creater;var m=e.kit.extra.jsonToUrl(n,h);r.insertIFrame({url:m,root:q,width:n.width,height:n.height});return p}});b.register("widget.iframe.comments",function(e){var h="http://widget.weibo.com/distribution/comments.php";var g=["silver","blue","pink","green","yellow","orange","purple","skyblue","gray","black"];var f=function(j){return e.core.arr.indexOf(j,g)+1};return function(s){var p={};var t=e.common.iframe();var q=e.core.obj.parseParam({dom:null,url:"",border:"y",width:"280",skin:"silver",ralateuid:"",brandline:"n",fontsize:"14",color:"",language:"zh_cn",appkey:""},s);var n=q.dom;if(!n){throw"no avaliable dom element found."}var o=e.kit.extra.clone(q);var j=o.url;if(j==""||j=="auto"){j=document.location.href}o.url=encodeURIComponent(j);var m=o.width;if(m=="auto"){o.width="0";m="100%"}if(o.color!=""){o.colordiy="1"}if(o.border=="y"){o.border="1"}o.skin=f(o.skin);delete o.dom;var r=e.kit.extra.jsonToUrl(o,h,function(u){return u});t.insertIFrame({id:"WBCommentFrame",url:r,root:n,width:m,height:o.height});e.core.io.scriptLoader({url:"http://js.t.sinajs.cn/open/widget/js/widget/comment.js?ver=20120605.js",onComplete:function(){window.WBComment.init({id:"WBCommentFrame"})}});return p}});b.register("widget.iframe.show",function(e){var h="http://widget.weibo.com/weiboshow/index.php";var g=["default","gray","green","pink","white","purple","yellow","orange","coffee","blue","black"];var f=function(j){return e.core.arr.indexOf(j,g)+1};return function(j){var q={};var s=e.common.iframe();var o=e.core.obj.parseParam({dom:null,uid:"",titlebar:"y",border:"y",fans:"y",feed:"y",fansrow:"2",verifier:"",width:"350",height:"550",ptype:"1",skin:"default",speed:"0",color:"",language:"zh_cn",appkey:""},j);var r=o.dom;if(!r){throw"no avaliable dom element found."}if(e.kit.extra.isNull(o.uid)){throw"no avaliable uid found."}var n=e.kit.extra.clone(o);n.isTitle=n.titlebar;n.noborder=n.border;n.isFans=n.fans;n.isWeibo=n.feed;n.fansRow=n.fansrow;n.skin=f(n.skin);var p=n.width;if(p=="auto"){n.width="0";p="100%"}delete n.dom;delete n.titlebar;delete n.border;delete n.fans;delete n.feed;delete n.fansrow;var m=e.kit.extra.jsonToUrl(n,h);s.insertIFrame({url:m,root:r,width:p,height:n.height});return q}});b.register("core.dom.setStyles",function(e){return function(f,g,h){if(!e.core.arr.isArray(f)){var f=[f]}for(i=0,l=f.length;i<l;i++){e.core.dom.setStyle(f[i],g,h)}return f}});b.register("core.dom.next",function(e){return function(g){var f=g.nextSibling;if(!f){return null}else{if(f.nodeType!==1){f=arguments.callee(f)}}return f}});b.register("kit.dom.firstChild",function(f){var e=f.core.dom.next;return function(g){var h=g.firstChild;if(h&&h.nodeType!=1){h=e(h)}return h}});b.register("template.social.hotlist",function(j){var h={};var g='<#et temp config><div node-type="outer" class="WB_widgets WB_txta WB_linka  social_recommend social_recommend_rank"><div class="sore_title"><div class="soreTit_logo"><span title="微博" class="WB_logo16a">微博</span>微博分享TOP${config.count}<#if (config.friendlist == "y")><span class="soca_icon soca_icon_friend"></span><#else><#if (config.cycle == "hour")><span class="soca_icon soca_icon_time"></span></#if><#if (config.cycle == "day")><span class="soca_icon soca_icon_day"></span></#if><#if (config.cycle == "week")><span class="soca_icon soca_icon_week"></span></#if></#if></div><#if (config.type == "simple")><div class="soreTit_page" node-type="nav" style="display:none;"><span class="WB_widget_page"><a href="javascript:void(0)" class="WB_ctl_prv_dis" node-type="prev" onclick="return false;">上一张</a><a href="javascript:void(0)" class="WB_ctl_nxt_dis" node-type="next" onclick="return false;">下一张</a></span><span node-type="page" class="page_count"></span></div></#if></div><div class="sore_list" node-type="inner"></div></div></#et>';var m='<div class="state_box"><div class="soaclist_state"><span class="WB_loadingB"></span></div></div>';var f='<div class="state_box"><div class="soaclist_state"><span class="WB_tipS_err"></span>加载失败，请<a href="javascript:void(0);" onclick="return false;" action-type="retry">重试</a></div></div>';var e='<div class="state_box"><div class="log_box"><p class="log_txt">登录以查看好友热门分享</p><div class="WB_widgets WB_loginButton"><a href="javascript:;" action-type="login"><img alt="" src="http://img.t.sinajs.cn/t4/appstyle/widget/images/loginButton/loginButton_24.png"></a></div></div></div>';h.layoutTemplate=g;h.loadingTemplate=m;h.errorTemplate=f;h.loginTemplate=e;return h});b.register("core.arr.foreach",function(g){var e=function(q,m){var p=[];for(var n=0,j=q.length;n<j;n+=1){var h=m(q[n],n);if(h===false){break}else{if(h!==null){p[n]=h}}}return p};var f=function(p,j){var n={};for(var m in p){var h=j(p[m],m);if(h===false){break}else{if(h!==null){n[m]=h}}}return n};return function(j,h){if(g.core.arr.isArray(j)||(j.length&&j[0]!==undefined)){return e(j,h)}else{if(typeof j==="object"){return f(j,h)}}return null}});b.register("core.ani.algorithm",function(f){var e={linear:function(h,g,n,m,j){return n*h/m+g},easeincubic:function(h,g,n,m,j){return n*(h/=m)*h*h+g},easeoutcubic:function(h,g,n,m,j){if((h/=m/2)<1){return n/2*h*h*h+g}return n/2*((h-=2)*h*h+2)+g},easeinoutcubic:function(h,g,n,m,j){if(j==undefined){j=1.70158}return n*(h/=m)*h*((j+1)*h-j)+g},easeinback:function(h,g,n,m,j){if(j==undefined){j=1.70158}return n*((h=h/m-1)*h*((j+1)*h+j)+1)+g},easeoutback:function(h,g,n,m,j){if(j==undefined){j=1.70158}return n*((h=h/m-1)*h*((j+1)*h+j)+1)+g},easeinoutback:function(h,g,n,m,j){if(j==undefined){j=1.70158}if((h/=m/2)<1){return n/2*(h*h*(((j*=(1.525))+1)*h-j))+g}return n/2*((h-=2)*h*(((j*=(1.525))+1)*h+j)+2)+g}};return{addAlgorithm:function(g,h){if(e[g]){throw"[core.ani.tweenValue] this algorithm :"+g+"already exist"}e[g]=h},compute:function(o,j,h,m,n,g,p){if(typeof e[o]!=="function"){throw"[core.ani.tweenValue] this algorithm :"+o+"do not exist"}return e[o](m,j,h,n,g,p)}}});b.register("core.ani.tweenArche",function(e){return function(r,s){var o,n,m,g,h,f,p,j;n={};o=e.core.obj.parseParam({animationType:"linear",distance:1,duration:500,callback:e.core.func.empty,algorithmParams:{},extra:5,delay:25},s);var q=function(){m=(+new Date()-g);if(m<o.duration){h=e.core.ani.algorithm.compute(o.animationType,0,o.distance,m,o.duration,o.extra,o.algorithmParams);r(h);f=setTimeout(q,o.delay)}else{j="stop";o.callback()}};j="stop";n.getStatus=function(){return j};n.play=function(){g=+new Date();h=null;q();j="play";return n};n.stop=function(){clearTimeout(f);j="stop";return n};n.resume=function(){if(p){g+=(+new Date()-p);q()}return n};n.pause=function(){clearTimeout(f);p=+new Date();j="pause";return n};n.destroy=function(){clearTimeout(f);p=0;j="stop"};return n}});b.register("core.dom.cssText",function(e){return function(j){j=(j||"").replace(/(^[^\:]*?;)|(;[^\:]*?$)/g,"").split(";");var n={},g;for(var f=0;f<j.length;f++){g=j[f].split(":");n[g[0].toLowerCase()]=g[1]}var m=[],h={push:function(p,o){n[p.toLowerCase()]=o;return h},remove:function(o){o=o.toLowerCase();n[o]&&delete n[o];return h},getCss:function(){var p=[];for(var o in n){p.push(o+":"+n[o])}return p.join(";")}};return h}});b.register("core.json.merge",function(f){var e=function(h){if(h===undefined){return true}if(h===null){return true}if(f.core.arr.inArray(["number","string","function"],(typeof h))){return true}if(f.core.arr.isArray(h)){return true}if(f.core.dom.isNode(h)){return true}return false};var g=function(n,p,m){var o={};for(var j in n){if(p[j]===undefined){o[j]=n[j]}else{if(!e(n[j])&&!e(p[j])&&m){o[j]=arguments.callee(n[j],p[j])}else{o[j]=p[j]}}}for(var h in p){if(o[h]===undefined){o[h]=p[h]}}return o};return function(h,n,m){var j=f.core.obj.parseParam({isDeep:false},m);return g(h,n,j.isDeep)}});b.register("core.util.color",function(m){var g=/^#([a-fA-F0-9]{3,8})$/;var j=/^rgb[a]?\s*\((\s*([0-9]{1,3})\s*,){2,3}(\s*([0-9]{1,3})\s*)\)$/;var h=/([0-9]{1,3})/ig;var e=/([a-fA-F0-9]{2})/ig;var f=m.core.arr.foreach;var n=function(q){var o=[];var p=[];if(g.test(q)){p=q.match(g);if(p[1].length<=4){o=f(p[1].split(""),function(s,r){return parseInt(s+s,16)})}else{if(p[1].length<=8){o=f(p[1].match(e),function(s,r){return parseInt(s,16)})}}return o}if(j.test(q)){p=q.match(h);o=f(p,function(s,r){return parseInt(s,10)});return o}return false};return function(q,o){var p=n(q);if(!p){return false}var r={};r.getR=function(){return p[0]};r.getG=function(){return p[1]};r.getB=function(){return p[2]};r.getA=function(){return p[3]};return r}});b.register("core.ani.tween",function(h){var e=h.core.ani.tweenArche;var f=h.core.arr.foreach;var n=h.core.dom.getStyle;var o=h.core.func.getType;var r=h.core.obj.parseParam;var q=h.core.json.merge;var g=h.core.util.color;var m=function(v){var u=/(-?\d\.?\d*)([a-z%]*)/i.exec(v);var t=[0,"px"];if(u){if(u[1]){t[0]=u[1]-0}if(u[2]){t[1]=u[2]}}return t};var s=function(w){for(var v=0,t=w.length;v<t;v+=1){var u=w.charCodeAt(v);if(u>64&&u<90){var x=w.substr(0,v);var z=w.substr(v,1);var y=w.slice(v+1);return x+"-"+z.toLowerCase()+y}}return w};var p=function(y,A,v){var z=n(y,v);if(o(z)==="undefined"||z==="auto"){if(v==="height"){z=y.offsetHeight}if(v==="width"){z=y.offsetWidth}}var u={start:z,end:A,unit:"",key:v,defaultColor:false};if(o(A)==="number"){var w=[0,"px"];if(o(z)==="number"){w[0]=z}else{w=m(z)}u.start=w[0];u.unit=w[1]}if(o(A)==="string"){var t,x;t=g(A);if(t){x=g(z);if(!x){x=g("#fff")}u.start=x;u.end=t;u.defaultColor=true}}y=null;return u};var j={opacity:function(u,x,t,v){var w=(u*(t-x)+x);return{filter:"alpha(opacity="+w*100+")",opacity:Math.max(Math.min(1,w),0)}},defaultColor:function(w,A,u,z){var y=Math.max(0,Math.min(255,Math.ceil((w*(u.getR()-A.getR())+A.getR()))));var x=Math.max(0,Math.min(255,Math.ceil((w*(u.getG()-A.getG())+A.getG()))));var t=Math.max(0,Math.min(255,Math.ceil((w*(u.getB()-A.getB())+A.getB()))));var v={};v[s(key)]="#"+(y<16?"0":"")+y.toString(16)+(x<16?"0":"")+x.toString(16)+(t<16?"0":"")+t.toString(16);return v},"default":function(w,z,t,x,v){var y=(w*(t-z)+z);var u={};u[s(v)]=y+x;return u}};return function(v,E){var y,z,t,F,G,D,H,w,x,B;E=E||{};z=r({animationType:"linear",duration:500,algorithmParams:{},extra:5,delay:25},E);z.distance=1;z.callback=(function(){var I=E.end||h.core.func.empty;return function(){F(1);H();I(v)}})();t=q(j,E.propertys||{});D=null;G={};x=[];F=function(I){var K=[];var J=f(G,function(P,N){var O;if(t[N]){O=t[N]}else{if(P.defaultColor){O=t.defaultColor}else{O=t["default"]}}var M=O(I,P.start,P.end,P.unit,P.key);for(var L in M){D.push(L,M[L])}});v.style.cssText=D.getCss()};H=function(){var I;while(I=x.shift()){try{I.fn();if(I.type==="play"){break}if(I.type==="destroy"){break}}catch(J){}}};B=e(F,z);var A=function(){if(B.getStatus()!=="play"){v=el}else{x.push({fn:A,type:"setNode"})}};var u=function(I){if(B.getStatus()!=="play"){G=f(I,function(K,J){return p(v,K,J)});D=h.core.dom.cssText(v.style.cssText+(E.staticStyle||""));B.play()}else{x.push({fn:function(){u(I)},type:"play"})}};var C=function(){if(B.getStatus()!=="play"){B.destroy();v=null;y=null;z=null;t=null;F=null;G=null;D=null;H=null;w=null;x=null}else{x.push({fn:C,type:"destroy"})}};y={};y.play=function(I){u(I);return y};y.stop=function(){B.stop();return y};y.pause=function(){B.pause();return y};y.resume=function(){B.resume();return y};y.finish=function(I){u(I);C();return y};y.setNode=function(I){A();return y};y.destroy=function(){C();return y};return y}});b.register("common.plugins.slider",function(j){var f=j.core.evt.addEvent,e=j.core.dom.getStyle,h=j.core.dom.setStyle,g=j.core.dom.setStyles,m=j.core.dom.sizzle;return function(F,B){if(!F){throw"it need node for slider"}var t={};var w={step:1,speed:1000,show:1,auto:false,pause:2000,duration:500,animationType:"linear",itemWidth:null,itemSelector:"",prevCss:"WB_ctl_prv,WB_ctl_prv_dis",nextCss:"WB_ctl_nxt,WB_ctl_nxt_dis",vertical:false,continuous:false,controlsFade:true,slideCbk:null};var p=j.core.obj.parseParam(w,B);var G={};G.prevBtn=F.prev;G.nextBtn=F.next;G.slider=F.slider;G.dir="next";if(!G.slider){throw"no slider box found"}var A=j.kit.dom.firstChild(G.slider),z=(p.itemSelector=="")?m("li",A):m("li["+p.itemSelector+"]",A),I=z.length,E=p.itemWidth||z[0].offsetWidth+parseInt(e(z[0],"marginLeft"))+parseInt(e(z[0],"marginRight")),C=z[0].offsetHeight+parseInt(e(z[0],"marginTop"))+parseInt(e(z[0],"marginBottom")),N=Math.floor((I-p.show)/p.step),r=0,q=true,s=I;var u=p.prevCss.split(","),L=p.nextCss.split(","),v=u[0],M=u[1],J=L[0],y=L[1];h(G.slider,"overflow","hidden");h(A,"width",s*E+"px");if(!p.vertical){for(var H=0;H<I;H++){h(z[H],"float","left")}}if(p.itemWidth){for(var H=0;H<I;H++){h(z[H],"width",p.itemWidth+"px")}}var o=function(){};var K=j.core.ani.tween(A,{animationType:p.animationType,duration:p.duration,end:function(){p.slideCbk&&p.slideCbk({slider:A,dir:G.dir,itemWidth:E,index:r,items:z,item:z[r],length:I})}});var D=function(O,Q,P){if(j.core.arr.isArray(O)){j.core.arr.foreach(O,function(R,S){f(R,Q,P)})}else{f(O,Q,P)}};D(G.prevBtn,"click",function(){n("prev",true)});D(G.nextBtn,"click",function(){n("next",true)});function n(P,Q){var R=r;switch(P){case"next":r=(r>=N)?(p.continuous?0:N):r+1;break;case"prev":r=(r<=0)?(p.continuous?N:0):r-1;break;default:break}G.dir=P;var O;if(!p.vertical){O=(r*E*p.step*-1);K.play({marginLeft:O})}else{O=(r*C*p.step*-1);K.play({marginTop:O})}if(p.controlsFade){if(r==0){q=false;if(N==0){G.prevBtn.className=M;G.nextBtn.className=y}else{G.prevBtn.className=M;G.nextBtn.className=J}}else{if(r==N){q=false;G.prevBtn.className=v;G.nextBtn.className=y}else{q=true;G.prevBtn.className=v;G.nextBtn.className=J}}}if(Q||!q){clearTimeout(x)}if(p.auto&&(q||p.continuous)){x=setTimeout(function(){n(P,false)},p.speed+p.pause)}}var x;if(p.auto){x=setTimeout(function(){n("next",false)},p.pause)}if(p.controlsFade){if(N==0){G.prevBtn.className=M;G.nextBtn.className=y}else{G.prevBtn.className=M;G.nextBtn.className=J}}};return that});b.register("widget.social.hotlist",function(g){var e=g.core.util.easyTemplate,f=g.core.evt.addEvent,o=g.core.evt.removeEvent,r=g.core.dom.sizzle,m=g.core.dom.builder,n=g.core.util.browser.IE6,h=g.common.social.util,q=g.template.social.hotlist;var j="appstyle/widget/css/socialRelations/social_recommend.css";var p={all:-1,hour:0,day:1,week:2,friend:3};var s=function(u){var t="";if(u=="text,face"||u=="face,text"){t=0}else{if(u=="text"){t=1}else{if(u=="face"){t=2}}}return t};return function(A){var B={};var t,J,v,E;var C=g.core.obj.parseParam({dom:null,count:10,type:"normal",cycle:"week",domain:null,friendlist:"n",social:"",popup:null,width:245,height:"auto"},A);t=C.dom;var H=C.friendlist=="n"?p[C.cycle]:p[C.friend];C.band=H;var z=g.common.social.statistical({band:H});var K=function(){I();L();u()};var D=function(){};var I=function(){};var L=function(){D();if(C.social.indexOf("face")!=-1){C.popup="layer"}if(C.popup=="layer"){C.widget="hotlist";g.widget.social.bubble(J,C)}y.pv()};var D=function(){g.kit.io.cssLoader(j,{load_ID:"social2_css_load_status"});var O=e(q.layoutTemplate,C).toString();var Q=m(O);J=g.kit.dom.parseDOM(Q.list);var P=C.width,N=C.height;if(/^(\d+)$/.test(P)){if(n){P=P<245?245:P;J.inner.style.width=parseInt(P,10)-10+"px"}J.outer.style.width=parseInt(P,10)+"px"}if(/^(\d+)$/.test(N)){J.outer.style.height=parseInt(N,10)+"px"}t.innerHTML="";t.appendChild(Q.box);F()};var F=function(){J.inner.innerHTML=q.loadingTemplate;var O=C.friendlist=="n"?"top_domain":"top_user";var P=C.friendlist=="y"?"week":C.cycle;var N={domain:C.domain,num:C.count,width:C.width,social:s(C.social),category:p[P],suggest_user:(C.social!=""?1:0)},Q=function(S){if(S&&S.code=="100000"){var R=S.data;if(R==""){R=C.friendlist=="n"?"暂无分享记录":"暂无好友分享记录";R='<div class="state_box"><div class="soaclist_state">'+R+"</div></div>"}J.inner.innerHTML=R;(C.type=="simple")&&w()}else{if(S.code=="100002"){var R=q.loginTemplate;if(C.type=="normal"){R+='<p class="list_tit">热门分享</p>'+S.data}J.inner.innerHTML=R}else{J.inner.innerHTML=q.errorTemplate}}};g.comp.social.io.jsonp(O,N,Q)};var w=function(){var N=r("li[action-type=lihover]",J.inner);for(var O=0;O<N.length;O++){N[O].className="li_hover"}J.page.innerHTML=1+"/"+N.length;if(N.length>0){J.nav.style.display="";g.common.plugins.slider({slider:J.inner,prev:J.prev,next:J.next},{itemWidth:g.core.dom.getSize(J.inner).width,itemSelector:"action-type=lihover",slideCbk:function(P){J.page.innerHTML=parseInt(P.index+1)+"/"+P.length}})}};var x=function(N){clearTimeout(E);E=setTimeout(function(){v=v||r(".li_hover",J.inner)[0];if(v===N.el){return}v&&(v.className="");N.el.className="li_hover";v=N.el},200)};var G=function(){if(!WB2.checkLogin()){WB2.login(function(){F();v=null})}};var y={pv:function(){z.request({action:"pv"})},linkclk:function(){z.request({action:"linkclk"})},userclk:function(){z.request({action:"userclk"})}};var u=function(){delegateEvt=g.core.evt.delegatedEvent(J.outer);delegateEvt.add("retry","click",F);delegateEvt.add("login","click",G);delegateEvt.add("linkclk","click",y.linkclk);delegateEvt.add("userclk","click",y.userclk);if(C.type=="normal"){delegateEvt.add("lihover","mouseover",x)}};var M=function(){delegateEvt.remove("retry","click");delegateEvt.remove("login","click");delegateEvt.remove("linkclk","click");delegateEvt.remove("userclk","click")};K();B.destroy=M;return B}});b.register("widget.iframe.hotlist",function(e){return function(f){e.widget.social.hotlist(f)}});b.register("widget.iframe.topic",function(e){var h="http://widget.weibo.com/topics";var g=h+"/topic_vote_base.php";var f={topmid:"top_mblog",column:"isshowright",tags:"tag",red_text:"a_view",blue_text:"b_view"};return function(u){var r={};var w=e.common.iframe();var n={dom:null,uid:"",url:"",topmid:"",column:"y",border:"y",footbar:"y",title:"",width:"821",height:"1580",tags:"",red_text:"",blue_text:"",tab:"",color:"",refer:"y",filter:"n",language:"zh_cn",version:"pk",appkey:""};if(u.version=="base"){n.height=1190}var s=e.core.obj.parseParam(n,u);var o=s.dom;if(!o){throw"no avaliable dom element found."}if(s.version=="base"){if(s.height==1580){s.height==1190}}var t=1200;var q=e.kit.extra.clone(s);if(q.filter=="n"){q.dup=0;q.antispam=0;q.isOutTopicSearch=0}else{q.dup=1;q.antispam=1;q.isOutTopicSearch=2}if(q.column=="y"){q.width=(q.width>821?q.width:821)}else{q.width=(q.width>560?q.width:560)}q.width=(q.width>t?t:q.width);if(s.version=="base"){q.height=(q.height<925?1190:q.height)-591}else{q.height=(q.height<1250?1580:q.height)-980}for(var m in f){q[f[m]]=q[m];if(m=="tags"||m=="red_text"||m=="blue_text"){q[f[m]]=encodeURI(q[m])}delete q[m]}if(s.url!=""){q.og=encodeURIComponent(s.url);delete q.url}else{var v=e.core.dom.sizzle('meta[property="og:url"]');if(v&&v[0]){q.og=encodeURIComponent(v[0].getAttribute("content"))}else{q.og=encodeURIComponent(document.location.href)}}q.app_src=s.appkey;delete q.appkey;q.r=(new Date()).valueOf();delete q.dom;if(s.version=="pk"){g=h+"/topic_vote.php"}var j=e.kit.extra.jsonToUrl(q,g);w.insertIFrame({url:j,root:o,width:q.width,height:s.height});return r}});var a={"follow-button":"follow","share-button":"share",livestream:"live",bulkfollow:"bulkfollow",comments:"comments",list:"list",show:"show",hotlist:"hotlist",topic:"topic"};var c=function(f){var e=f.tagName;e!=""&&a[e]!=""&&typeof b.widget.iframe[a[e]]=="function"&&b.widget.iframe[a[e]](f)};WB2.widget.iframeWidget=c})();